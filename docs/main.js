/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={591:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},577:()=>{},354:()=>{},479:()=>{},498:()=>{}},a={};function t(r){var n=a[r];if(void 0!==n)return n.exports;var i=a[r]={exports:{}};return e[r](i,i.exports,t),i.exports}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";var e=null;"undefined"!=typeof WebSocket?e=WebSocket:"undefined"!=typeof MozWebSocket?e=MozWebSocket:void 0!==t.g?e=t.g.WebSocket||t.g.MozWebSocket:"undefined"!=typeof window?e=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(e=self.WebSocket||self.MozWebSocket);const a=e;function r(e){for(var a={$:"Nil"},t=e.length-1;t>=0;t--)a={$:"Cons",head:BigInt(e.charCodeAt(t)),tail:a};return a}function n(e,a,t){for(;;){var r=a;switch(r.$){case"Leaf":var n={$:"None"};break;case"Node":var i=t;switch(i.$){case"E":n=r.val;break;case"I":a=r.rgt,t=i.tail;continue;case"O":a=r.lft,t=i.tail;continue}}return n}}function i(e,a,t,r){var n=a;switch(n.$){case"Leaf":var s=t;switch(s.$){case"E":var o={$:"Node"},c={$:"Some"},v=r;c.value=v,o.val=c,o.lft={$:"Leaf"},o.rgt={$:"Leaf"};break;case"I":(o={$:"Node"}).val={$:"None"},o.lft={$:"Leaf"};var u=i(e,{$:"Leaf"},s.tail,r);o.rgt=u;break;case"O":(o={$:"Node"}).val={$:"None"};var l=i(e,{$:"Leaf"},s.tail,r);o.lft=l,o.rgt={$:"Leaf"}}break;case"Node":var d=t;switch(d.$){case"E":o={$:"Node"};var h={$:"Some"},f=r;h.value=f,o.val=h;var b=n.lft;o.lft=b;var $=n.rgt;o.rgt=$;break;case"I":o={$:"Node"};var _=n.val;o.val=_;var y=n.lft;o.lft=y;var k=i(e,n.rgt,d.tail,r);o.rgt=k;break;case"O":o={$:"Node"};var p=n.val;o.val=p;var g=i(e,n.lft,d.tail,r);o.lft=g;var m=n.rgt;o.rgt=m}}return o}function s(e,a){switch(e.$){case"False":var t={$:"False"};break;case"True":t=a}return t}function o(e){var a=e;switch(a.$){case"False":var t=function(e){if("False"===e.$)var a={$:"True"};else a={$:"False"};return a};break;case"True":t=function(e){if("True"===e.$)var a={$:"True"};else a={$:"False"};return a};break;default:t=null(a)}return t}function c(e,a){switch(e.$){case"False":var t=a;break;case"True":t={$:"True"}}return t}function v(e){if(0n===e)var a={$:"False"};else a={$:"True"};return a}function u(e,a){var t=e,r=a;return BigInt.asUintN(64,t===r)}function l(e,a){switch(v(u(e,a)).$){case"True":var t={$:"EQ"};break;case"False":var r=e,n=a;switch(v(BigInt.asUintN(64,r<n)).$){case"True":t={$:"LT"};break;case"False":t={$:"GT"}}}return t}t(591),t(577),t(479),t(354),t(498),new Map;var d,h=((d={$:"Ord"}).compare=function(e){return function(a){return function(e,a){return l(e,a)}(e,a)}},d);function f(e,a){return v(u(e,a))}function b(e){return 0-e}function $(e,a){var t=e,r=a;return v(BigInt.asUintN(64,t<r))}function _(e){switch($(e,0).$){case"True":var a=b(e);break;case"False":a=e}return a}function y(e,a){return e+a}function k(e,a){return e/a}function p(e,a){return v(function(e,a){var t=e,r=a;return BigInt.asUintN(64,t===r)}(e,a))}function g(e,a){var t=e,r=a;return v(BigInt.asUintN(64,t>r))}function m(e,a){var t=e,r=a;return v(BigInt.asUintN(64,t>=r))}function w(e){var a=e;return v(BigInt.asUintN(64,0===a))}function x(e,a){var t=e,r=a;return v(BigInt.asUintN(64,t<=r))}function N(e,a){var t=e,r=a;switch(v(BigInt.asUintN(64,t<=r)).$){case"True":var n=e;break;case"False":n=a}return n}function S(e,a){return e*a}function M(e){switch(w(e).$){case"True":var a=e;break;case"False":a=function(e,a,t){for(;;){var r=t;if(0n===r)var n=a;else{var i=a,s=k(e,a),o=k(y(i,s),2);switch(p(a,o).$){case"True":n=o;break;case"False":var c=r;a=o,t=BigInt.asUintN(64,c-1n);continue}}return n}}(e,k(e,2),10n)}return a}function B(e,a){return e-a}var P=0n,F=2n;function T(e,a,t){var r=a;switch(r.$){case"Cons":var n={$:"Cons"},i=r.head;n.head=i;var s=T(e,r.tail,t);n.tail=s;break;case"Nil":n=t}return n}function C(e,a,t,r,n){var i=a;switch(i.$){case"Cons":var s=n(i.head)(C(e,i.tail,t,r,n));break;case"Nil":s=r}return s}function I(e,a,t,r){var n=a;switch(n.$){case"Cons":switch(r(t)(n.head).$){case"False":var i={$:"Cons"},s=n.head;i.head=s;var o=I(e,n.tail,t,r);i.tail=o;break;case"True":(i={$:"Cons"}).head=t;var c={$:"Cons"},v=n.head;c.head=v;var u=n.tail;c.tail=u,i.tail=c}break;case"Nil":(i={$:"Cons"}).head=t,i.tail={$:"Nil"}}return i}function U(e,a,t){var r=a;switch(r.$){case"Cons":var n=I(e,U(e,r.tail,t),r.head,t);break;case"Nil":n={$:"Nil"}}return n}function E(e,a,t,r){var n=t;switch(n.$){case"Cons":var i={$:"Cons"},s=r(n.head);i.head=s;var o=E(e,a,n.tail,r);i.tail=o;break;case"Nil":i={$:"Nil"}}return i}function A(e,a,t,r){var n=t;switch(n.$){case"Cons":var i=r;switch(i.$){case"Cons":var s={$:"Cons"},o={$:"Pair"},c=n.head;o.fst=c;var v=i.head;o.snd=v,s.head=o;var u=A(e,a,n.tail,i.tail);s.tail=u;break;case"Nil":s={$:"Nil"}}break;case"Nil":s={$:"Nil"}}return s}var L=1n,G=3n;function O(e){var a=new Map;return a.set(-1n,{$:"None"}),a}function R(e,a){return v(u(e,a))}function V(e,a,t,r,n,i){return function(e,a,t,r,n,i){for(;;){switch(R(r,0n).$){case"False":var s=t,o=r,c=s.has(o)?s.get(o):s.get(-1n),v=s,u=c;switch(u.$){case"None":var l=r;t=v,r=BigInt.asUintN(64,l-1n);continue;case"Some":var d=r,h=r;t=v,r=BigInt.asUintN(64,d-1n),n=i(n)(h)(u.value);continue}break;case"True":var f=t,b=f.has(0n)?f.get(0n):f.get(-1n);switch(b.$){case"None":var $=n;break;case"Some":$=i(n)(0n)(b.value)}}return $}}(0,0,t,r,n,i)}function Z(e,a,t){var r=a,n=t;return r.has(n)?r.get(n):r.get(-1n)}function j(e,a,t,r){var n=a,i=t,s={$:"Some"},o=r;s.value=o,n.has(i)?n.get(i):n.get(-1n);var c=n;return n.set(i,s),c}function q(e,a,t){return function(e,a,t,r){for(;;){switch(R(t,0n).$){case"False":var n=a,i=t,s=n.has(i)?n.get(i):n.get(-1n),o=n,c=s;switch(c.$){case"None":var v=t;a=o,t=BigInt.asUintN(64,v-1n);continue;case"Some":var u=e,l=o,d=t,h=BigInt.asUintN(64,d-1n),f={$:"Cons"},b=c.value;f.head=b;var $=r;f.tail=$,e=u,a=l,t=h,r=f;continue}break;case"True":var _=a,y=_.has(0n)?_.get(0n):_.get(-1n);switch(y.$){case"None":var k=r;break;case"Some":k={$:"Cons"};var p=y.value;k.head=p;var g=r;k.tail=g}}return k}}(e,a,t,{$:"Nil"})}function D(e,a,t,r){return(0,a.compare)(t)(r)}function K(e,a,t,r,n,i){for(;;){var s=t;switch(s.$){case"Leaf":var o=n;break;case"Node":var c=K(e,a,s.left,r,n,i),v=i(s.key_value)(c);t=s.right,n=v;continue}return o}}function W(e,a,t,r){var n=r;switch(n.$){case"Leaf":var i=function(e){return{$:"None"}};break;case"Node":var s=n.key_value;i=function(r){switch(D(0,t,r,s.fst).$){case"EQ":var i={$:"Some"},o=s.snd;i.value=o;break;case"GT":i=W(e,a,t,n.right)(r);break;case"LT":i=W(e,a,t,n.left)(r)}return i}}return i}function H(e,a,t,r){var n=r;switch(n.$){case"Leaf":var i=function(e){var a={$:"Pair"},t={$:"Node"},r=e;return t.key_value=r,t.balance={$:"Zero"},t.left={$:"Leaf"},t.right={$:"Leaf"},a.fst=t,a.snd={$:"True"},a};break;case"Node":var s=n.key_value;i=function(r){var i=r;switch(D(0,t,i.fst,s.fst).$){case"EQ":var o={$:"Pair"},c={$:"Node"},v={$:"Pair"},u=i.fst;v.fst=u;var l=i.snd;v.snd=l,c.key_value=v;var d=n.balance;c.balance=d;var h=n.left;c.left=h;var f=n.right;c.right=f,o.fst=c,o.snd={$:"False"};break;case"GT":var b=H(e,a,t,n.right),$={$:"Pair"},_=i.fst;$.fst=_;var y=i.snd;$.snd=y;var k=b($);switch(k.snd.$){case"True":switch(n.balance.$){case"PlusOne":var p={$:"Node"},g={$:"Pair"},m=s.fst;g.fst=m;var w=s.snd;g.snd=w,p.key_value=g,p.balance={$:"PlusOne"};var x=n.left;p.left=x;var N=k.fst;p.right=N,o=function(e,a,t){var r=t;switch(r.$){case"Leaf":(c={$:"Pair"}).fst={$:"Leaf"},c.snd={$:"False"};break;case"Node":var n=r.balance;if("PlusOne"===n.$){var i=r.right;if("Node"===i.$){var s=i.balance;switch(s.$){case"MinusOne":var o=i.left;if("Node"===o.$)switch(o.balance.$){case"MinusOne":var c={$:"Pair"},v={$:"Node"},u=o.key_value;v.key_value=u,v.balance={$:"Zero"};var l={$:"Node"},d=r.key_value;l.key_value=d,l.balance={$:"Zero"};var h=r.left;l.left=h;var f=o.left;l.right=f,v.left=l;var b={$:"Node"},$=i.key_value;b.key_value=$,b.balance={$:"PlusOne"};var _=o.right;b.left=_;var y=i.right;b.right=y,v.right=b,c.fst=v,c.snd={$:"False"};break;case"PlusOne":c={$:"Pair"};var k={$:"Node"},p=o.key_value;k.key_value=p,k.balance={$:"Zero"};var g={$:"Node"},m=r.key_value;g.key_value=m,g.balance={$:"MinusOne"};var w=r.left;g.left=w;var x=o.left;g.right=x,k.left=g;var N={$:"Node"},S=i.key_value;N.key_value=S,N.balance={$:"Zero"};var M=o.right;N.left=M;var B=i.right;N.right=B,k.right=N,c.fst=k,c.snd={$:"False"};break;case"Zero":c={$:"Pair"};var P={$:"Node"},F=o.key_value;P.key_value=F,P.balance={$:"Zero"};var T={$:"Node"},C=r.key_value;T.key_value=C,T.balance={$:"Zero"};var I=r.left;T.left=I;var U=o.left;T.right=U,P.left=T;var E={$:"Node"},A=i.key_value;E.key_value=A,E.balance={$:"Zero"};var L=o.right;E.left=L;var G=i.right;E.right=G,P.right=E,c.fst=P,c.snd={$:"False"}}else{c={$:"Pair"};var O={$:"Node"},R=r.key_value;O.key_value=R,O.balance={$:"PlusOne"};var V=r.left;O.left=V;var Z={$:"Node"},j=i.key_value;Z.key_value=j,Z.balance={$:"MinusOne"};var q=o;Z.left=q;var D=i.right;Z.right=D,O.right=Z,c.fst=O,c.snd={$:"False"}}break;case"PlusOne":c={$:"Pair"};var K={$:"Node"},W=i.key_value;K.key_value=W,K.balance={$:"Zero"};var H={$:"Node"},Q=r.key_value;H.key_value=Q,H.balance={$:"Zero"};var z=r.left;H.left=z;var Y=i.left;H.right=Y,K.left=H;var X=i.right;K.right=X,c.fst=K,c.snd={$:"False"};break;case"Zero":c={$:"Pair"};var J={$:"Node"},ee=i.key_value;J.key_value=ee,J.balance={$:"MinusOne"};var ae={$:"Node"},te=r.key_value;ae.key_value=te,ae.balance={$:"PlusOne"};var re=r.left;ae.left=re;var ne=i.left;ae.right=ne,J.left=ae;var ie=i.right;J.right=ie,c.fst=J,c.snd={$:"True"};break;default:c=null(s)(i.left)(i.right)}}else{c={$:"Pair"};var se={$:"Node"},oe=r.key_value;se.key_value=oe,se.balance={$:"PlusOne"};var ce=r.left;se.left=ce;var ve=i;se.right=ve,c.fst=se,c.snd={$:"False"}}}else{c={$:"Pair"};var ue={$:"Node"},le=r.key_value;ue.key_value=le;var de=n;ue.balance=de;var he=r.left;ue.left=he;var fe=r.right;ue.right=fe,c.fst=ue,c.snd={$:"False"}}break;default:c=null(r)}return c}(0,0,p);break;case"Zero":o={$:"Pair"};var S={$:"Node"},M={$:"Pair"},B=s.fst;M.fst=B;var P=s.snd;M.snd=P,S.key_value=M,S.balance={$:"PlusOne"};var F=n.left;S.left=F;var T=k.fst;S.right=T,o.fst=S,o.snd={$:"True"};break;case"MinusOne":o={$:"Pair"};var C={$:"Node"},I={$:"Pair"},U=s.fst;I.fst=U;var E=s.snd;I.snd=E,C.key_value=I,C.balance={$:"Zero"};var A=n.left;C.left=A;var L=k.fst;C.right=L,o.fst=C,o.snd={$:"False"}}break;case"False":o={$:"Pair"};var G={$:"Node"},O={$:"Pair"},R=s.fst;O.fst=R;var V=s.snd;O.snd=V,G.key_value=O;var Z=n.balance;G.balance=Z;var j=n.left;G.left=j;var q=k.fst;G.right=q,o.fst=G,o.snd={$:"False"}}break;case"LT":var K=H(e,a,t,n.left),W={$:"Pair"},Q=i.fst;W.fst=Q;var z=i.snd;W.snd=z;var Y=K(W);switch(Y.snd.$){case"True":switch(n.balance.$){case"PlusOne":o={$:"Pair"};var X={$:"Node"},J={$:"Pair"},ee=s.fst;J.fst=ee;var ae=s.snd;J.snd=ae,X.key_value=J,X.balance={$:"Zero"};var te=Y.fst;X.left=te;var re=n.right;X.right=re,o.fst=X,o.snd={$:"False"};break;case"Zero":o={$:"Pair"};var ne={$:"Node"},ie={$:"Pair"},se=s.fst;ie.fst=se;var oe=s.snd;ie.snd=oe,ne.key_value=ie,ne.balance={$:"MinusOne"};var ce=Y.fst;ne.left=ce;var ve=n.right;ne.right=ve,o.fst=ne,o.snd={$:"True"};break;case"MinusOne":var ue={$:"Node"},le={$:"Pair"},de=s.fst;le.fst=de;var he=s.snd;le.snd=he,ue.key_value=le,ue.balance={$:"MinusOne"};var fe=Y.fst;ue.left=fe;var be=n.right;ue.right=be,o=function(e,a,t){var r=t;switch(r.$){case"Leaf":(o={$:"Pair"}).fst={$:"Leaf"},o.snd={$:"False"};break;case"Node":var n=r.balance;if("MinusOne"===n.$){var i=r.left;if("Node"===i.$){var s=i.balance;switch(s.$){case"MinusOne":var o={$:"Pair"},c={$:"Node"},v=i.key_value;c.key_value=v,c.balance={$:"Zero"};var u=i.left;c.left=u;var l={$:"Node"},d=r.key_value;l.key_value=d,l.balance={$:"Zero"};var h=i.right;l.left=h;var f=r.right;l.right=f,c.right=l,o.fst=c,o.snd={$:"False"};break;case"PlusOne":var b=i.right;if("Node"===b.$)switch(b.balance.$){case"MinusOne":o={$:"Pair"};var $={$:"Node"},_=b.key_value;$.key_value=_,$.balance={$:"Zero"};var y={$:"Node"},k=i.key_value;y.key_value=k,y.balance={$:"Zero"};var p=i.left;y.left=p;var g=b.left;y.right=g,$.left=y;var m={$:"Node"},w=r.key_value;m.key_value=w,m.balance={$:"PlusOne"};var x=b.right;m.left=x;var N=r.right;m.right=N,$.right=m,o.fst=$,o.snd={$:"False"};break;case"PlusOne":o={$:"Pair"};var S={$:"Node"},M=b.key_value;S.key_value=M,S.balance={$:"Zero"};var B={$:"Node"},P=i.key_value;B.key_value=P,B.balance={$:"MinusOne"};var F=i.left;B.left=F;var T=b.left;B.right=T,S.left=B;var C={$:"Node"},I=r.key_value;C.key_value=I,C.balance={$:"Zero"};var U=b.right;C.left=U;var E=r.right;C.right=E,S.right=C,o.fst=S,o.snd={$:"False"};break;case"Zero":o={$:"Pair"};var A={$:"Node"},L=b.key_value;A.key_value=L,A.balance={$:"Zero"};var G={$:"Node"},O=i.key_value;G.key_value=O,G.balance={$:"Zero"};var R=i.left;G.left=R;var V=b.left;G.right=V,A.left=G;var Z={$:"Node"},j=r.key_value;Z.key_value=j,Z.balance={$:"Zero"};var q=b.right;Z.left=q;var D=r.right;Z.right=D,A.right=Z,o.fst=A,o.snd={$:"False"}}else{o={$:"Pair"};var K={$:"Node"},W=r.key_value;K.key_value=W,K.balance={$:"MinusOne"};var H={$:"Node"},Q=i.key_value;H.key_value=Q,H.balance={$:"PlusOne"};var z=i.left;H.left=z;var Y=b;H.right=Y,K.left=H;var X=r.right;K.right=X,o.fst=K,o.snd={$:"False"}}break;case"Zero":o={$:"Pair"};var J={$:"Node"},ee=i.key_value;J.key_value=ee,J.balance={$:"PlusOne"};var ae=i.left;J.left=ae;var te={$:"Node"},re=r.key_value;te.key_value=re,te.balance={$:"MinusOne"};var ne=i.right;te.left=ne;var ie=r.right;te.right=ie,J.right=te,o.fst=J,o.snd={$:"True"};break;default:o=null(s)(i.left)(i.right)(r.right)}}else{o={$:"Pair"};var se={$:"Node"},oe=r.key_value;se.key_value=oe,se.balance={$:"MinusOne"};var ce=i;se.left=ce;var ve=r.right;se.right=ve,o.fst=se,o.snd={$:"False"}}}else{o={$:"Pair"};var ue={$:"Node"},le=r.key_value;ue.key_value=le;var de=n;ue.balance=de;var he=r.left;ue.left=he;var fe=r.right;ue.right=fe,o.fst=ue,o.snd={$:"False"}}break;default:o=null(r)}return o}(0,0,ue)}break;case"False":o={$:"Pair"};var $e={$:"Node"},_e={$:"Pair"},ye=s.fst;_e.fst=ye;var ke=s.snd;_e.snd=ke,$e.key_value=_e;var pe=n.balance;$e.balance=pe;var ge=Y.fst;$e.left=ge;var me=n.right;$e.right=me,o.fst=$e,o.snd={$:"False"}}}return o}}return i}function Q(e,a,t,r,n){return function(e,a,t){return t.fst}(0,0,H(e,a,t,r)(n))}function z(e,a,t){var r=t;switch(r.$){case"Leaf":var n={$:"Nil"};break;case"Node":var i=r.key_value,s=z(e,a,r.left),o=z(e,a,r.right),c=e,v=s,u={$:"Cons"},l=i.fst;u.head=l;var d=o;u.tail=d,n=T(c,v,u)}return n}!function(){var e=new Map;e.set(1n,{$:"None"});var a={$:"Some",value:10n};e.set(2n,a);var t={$:"Some",value:20n};e.set(5n,t),e.set(-1n,{$:"None"})}(),function(){var e=new Map,a={$:"Some",value:42n};e.set(0n,a),e.set(1n,{$:"None"});var t={$:"Some",value:10n};e.set(2n,t);var r={$:"Some",value:20n};e.set(5n,r),e.set(-1n,{$:"None"})}(),function(){var e=new Map,a={$:"Some",value:42n};e.set(0n,a),e.set(1n,{$:"None"});var t={$:"Some",value:10n};e.set(2n,t),e.set(-1n,{$:"None"})}(),function(){var e=new Map;e.set(1n,{$:"None"});var a={$:"Some",value:10n};e.set(2n,a);var t={$:"Some",value:20n};e.set(5n,t),e.set(-1n,{$:"None"})}();var Y=101n,X=null,J=function(e){return function(a){return function(e,a){for(;;){var t=e;switch(t.$){case"Cons":var r=a;switch(r.$){case"Cons":switch(D(0,h,t.head,r.head).$){case"LT":var n={$:"LT"};break;case"EQ":e=t.tail,a=r.tail;continue;case"GT":n={$:"GT"}}break;case"Nil":n={$:"GT"}}break;case"Nil":switch(a.$){case"Cons":n={$:"LT"};break;case"Nil":n={$:"EQ"}}}return n}}(e,a)}},ee=function(){var e={$:"Ord"},a=J;return e.compare=a,e}(),ae=ee;function te(e,a){for(;;){var t=e;switch(t.$){case"Cons":var r=a;switch(r.$){case"Cons":switch(f(t.head,r.head).$){case"True":e=t.tail,a=r.tail;continue;case"False":var n={$:"False"}}break;case"Nil":n={$:"False"}}break;case"Nil":switch(a.$){case"Cons":n={$:"False"};break;case"Nil":n={$:"True"}}}return n}}var re=50n;function ne(e,a){var t=e,r=a;return BigInt.asUintN(64,t+r)}function ie(e,a){var t=e,r=a;return BigInt.asUintN(64,t/r)}function se(e){switch(e.$){case"False":var a=0n;break;case"True":a=1n}return a}function oe(e,a){var t=e,r=a;return v(BigInt.asUintN(64,t>r))}function ce(e,a){var t=e,r=a;return v(BigInt.asUintN(64,t>=r))}function ve(e,a){var t=e,r=a;return v(BigInt.asUintN(64,t<r))}function ue(e,a){var t=e,r=a;return v(BigInt.asUintN(64,t<=r))}function le(e,a){var t=e,r=a;return BigInt.asUintN(64,t*r)}function de(e,a){var t=e,r=a;return v(BigInt.asUintN(64,t!==r))}function he(e,a){var t=e,r=a;return BigInt.asUintN(64,t-r)}function fe(e){if(0n===e)var a={$:"E"};else{var t=e,r=BigInt.asUintN(64,t-1n);if(0n===r)(a={$:"I"}).tail={$:"E"};else{var n=r,i=BigInt.asUintN(64,n-1n),s=ie(BigInt.asUintN(64,2n+i),2n),o=r,c=BigInt.asUintN(64,o-1n);switch(v(function(e,a){var t=e,r=a;return BigInt.asUintN(64,t%r)}(BigInt.asUintN(64,2n+c),2n)).$){case"True":a={$:"I"};var u=fe(s);a.tail=u;break;case"False":a={$:"O"};var l=fe(s);a.tail=l}}}return a}var be=null;function $e(e){var a=e;return M(y(S(a.x,a.x),S(a.y,a.y)))}function _e(e){switch(function(e){var a=e;return s(w(a.x),w(a.y))}(e).$){case"True":var a=e;break;case"False":a=function(e,a){var t=e;switch(w(a).$){case"True":(r={$:"V2"}).x=0,r.y=0;break;case"False":var r={$:"V2"},n=k(t.x,a);r.x=n;var i=k(t.y,a);r.y=i}return r}(e,$e(e))}return a}function ye(e,a){var t=e,r=a,n={$:"V2"},i=B(t.x,r.x);n.x=i;var s=B(t.y,r.y);return n.y=s,n}function ke(e){var a=e;switch(a.$){case"Cons":var t=a.tail,r={$:"Cons"},n=a.head;r.head=n,r.tail={$:"Nil"};var i=T(null,t,r),s={$:"Cons"},o=a.head;s.head=o;var c=a.tail;s.tail=c;var v=A(null,null,s,i);break;case"Nil":v={$:"Nil"}}return v}function pe(e){var a=e,t={$:"V2"},r=a.x,n=Math.round(r*Math.pow(10,2))/Math.pow(10,2);t.x=n;var i=a.y,s=Math.round(i*Math.pow(10,2))/Math.pow(10,2);return t.y=s,t}function ge(e,a){var t=e,r=a;return y(S(t.x,r.x),S(t.y,r.y))}var me=function(e){return function(a){return function(e,a){var t=a;return pe(function(e,a,t){var r=e,n=a,i=t,s={$:"V2"},o=B(i.x,n.x);s.x=o;var c=B(i.y,n.y);s.y=c;var v={$:"V2"},u=B(r.x,n.x);v.x=u;var l=B(r.y,n.y);v.y=l;var d=k(ge(v,s),ge(s,s)),h=Math.round(d*Math.pow(10,2))/Math.pow(10,2);switch($(h,0).$){case"True":var f={$:"V2"},b=n.x;f.x=b;var _=n.y;f.y=_;break;case"False":switch(g(h,1).$){case"True":f={$:"V2"};var p=i.x;f.x=p;var m=i.y;f.y=m;break;case"False":f={$:"V2"};var w=y(n.x,S(B(i.x,n.x),h)),x=Math.round(w*Math.pow(10,2))/Math.pow(10,2);f.x=x;var N=y(n.y,S(B(i.y,n.y),h)),M=Math.round(N*Math.pow(10,2))/Math.pow(10,2);f.y=M}}return f}(e,t.fst,t.snd))}(e,a)}};function we(e,a){var t=ke(a),r=E(null,be,t,me(e)),n=function(e,a,t){return U(e,a,t)}(be,r,(function(a){return function(t){var r=$e(ye(e,a)),n=Math.round(r*Math.pow(10,2))/Math.pow(10,2),i=$e(ye(e,t));return $(n,Math.round(i*Math.pow(10,2))/Math.pow(10,2))}})),i=function(e,a){var t=a;switch(t.$){case"Cons":var r={$:"Some"},n=t.head;r.value=n;break;case"Nil":r={$:"None"}}return r}(0,n);switch(i.$){case"None":(s={$:"V2"}).x=1e4,s.y=1e4;break;case"Some":var s=pe(i.value)}return s}var xe=function(e){return function(a){return function(e,a){var t=e,r=a,n=y(t.x,r.x),i=y(t.y,r.y),s={$:"V2"},o=n;s.x=o;var c=i;return s.y=c,s}(e,a)}};function Ne(e){var a=e;switch(a.$){case"Circle":var t={$:"Nil"};break;case"Polygon":t=E(be,be,a.vertices,xe(a.center))}return t}function Se(e,a){var t={$:"V2"},r=e;t.x=r;var n=a;return t.y=n,t}function Me(e,a){var t=e;switch(t.$){case"Circle":var r=a;switch(r.$){case"Circle":var n=_e(ye(t.center,r.center));break;case"Polygon":var i=t.center,s=t.center,o={$:"Polygon"},c=r.center;o.center=c;var v=r.vertices;o.vertices=v,n=_e(ye(i,we(s,Ne(o))))}break;case"Polygon":var u=a;switch(u.$){case"Circle":var l=u.center,d={$:"Polygon"},h=t.center;d.center=h;var f=t.vertices;d.vertices=f,n=_e(ye(we(l,Ne(d)),t.center));break;case"Polygon":var b={$:"Polygon"},$=t.center;b.center=$;var _=t.vertices;b.vertices=_,Ne(b);var y={$:"Polygon"},k=u.center;y.center=k;var p=u.vertices;y.vertices=p,Ne(y),n=_e(Se(1e4,1e4))}}return n}function Be(e){var a=e;switch(a.$){case"Circle":var t=a.center;break;case"Polygon":t=a.center}return t}function Pe(e,a){var t=e,r=a,n={$:"V2"},i=y(t.x,r.x);n.x=i;var s=y(t.y,r.y);return n.y=s,n}function Fe(e,a){var t=e;switch(t.$){case"Circle":var r={$:"Circle"},n=pe(Pe(t.center,a));r.center=n;var i=t.radius;r.radius=i;break;case"Polygon":r={$:"Polygon"};var s=pe(Pe(t.center,a));r.center=s;var o=t.vertices;r.vertices=o}return r}function Te(e,a){return M(function(e,a){var t=e,r=a,n=B(r.x,t.x),i=B(r.y,t.y);return y(S(n,n),S(i,i))}(e,a))}function Ce(e){return e.x}function Ie(e){return e.y}function Ue(e,a,t){var r=t;switch(function(e,a,t){switch(s(g(Ie(a),Ie(e)),g(Ie(t),Ie(e))).$){case"True":var r={$:"False"};break;case"False":var n=B(Ce(t),Ce(a)),i=B(Ie(t),Ie(a)),o=k(B(Ie(e),Ie(a)),i),c=y(Ce(a),S(o,n));r=$(Ce(e),c)}return r}(e,r.fst,r.snd).$){case"True":var n=function(e){switch(e.$){case"False":var a={$:"True"};break;case"True":a={$:"False"}}return a}(a);break;case"False":n=a}return n}function Ee(e,a){var t=a;switch(t.$){case"Cons":var r=e,n=be,i={$:"Cons"},s=t.head;i.head=s;var o=t.tail;i.tail=o;var c={$:"Cons"},v=t.head;c.head=v,c.tail={$:"Nil"};var u=function(e,a,t){for(;;){var r=t;switch(r.$){case"Cons":var n=r.tail;switch(n.$){case"Cons":var i=e,s=e,o=a,c={$:"Pair"},v=r.head;c.fst=v;var u=n.head;c.snd=u;var l=Ue(s,o,c),d={$:"Cons"},h=n.head;d.head=h;var f=n.tail;d.tail=f,e=i,a=l,t=d;continue;case"Nil":var b=a}break;case"Nil":b=a}return b}}(r,{$:"False"},T(n,i,c));break;case"Nil":u={$:"False"}}return u}function Ae(e,a){var t=e;switch(t.$){case"Cons":var r=c(Ee(t.head,a),Ae(t.tail,a));break;case"Nil":r={$:"False"}}return r}function Le(e,a,t,r){var n=t;switch(n.$){case"Cons":var i=n.tail;switch(i.$){case"Cons":var o=function(e,a,t,r){var n=e,i=a,o=t,c=r,v=B(i.x,n.x),u=B(i.y,n.y),l=B(c.x,o.x),d=B(c.y,o.y),h=B(S(v,d),S(l,u));switch(p(h,0).$){case"True":var f={$:"False"};break;case"False":var b=B(o.x,n.x),$=B(o.y,n.y),_=k(y(S(d,b),S(B(o.x,c.x),$)),h),g=k(y(S(u,b),S(B(n.x,i.x),$)),h),w=s(m(_,0),x(_,1)),N=s(m(g,0),x(g,1));f=s(w,N)}return f}(e,a,n.head,i.head),v=e,u=a,l={$:"Cons"},d=i.head;l.head=d;var h=i.tail;l.tail=h;var f=c(o,Le(v,u,l,r));break;case"Nil":f={$:"False"}}break;case"Nil":f={$:"False"}}return f}function Ge(e,a){var t=e;switch(t.$){case"Cons":var r=t.tail;switch(r.$){case"Cons":var n=Le(t.head,r.head,a,a),i={$:"Cons"},s=r.head;i.head=s;var o=r.tail;i.tail=o;var v=c(n,Ge(i,a));break;case"Nil":v={$:"False"}}break;case"Nil":v={$:"False"}}return v}function Oe(e,a){var t=e;switch(t.$){case"Circle":var r=a;switch(r.$){case"Circle":var n=Te(t.center,r.center),i=Math.round(n*Math.pow(10,2))/Math.pow(10,2),s=y(t.radius,r.radius),o=x(i,Math.round(s*Math.pow(10,2))/Math.pow(10,2));break;case"Polygon":var v=t.center,u={$:"Polygon"},l=r.center;u.center=l;var d=r.vertices;u.vertices=d;var h=we(v,Ne(u)),f=Te(t.center,h);o=x(Math.round(f*Math.pow(10,2))/Math.pow(10,2),t.radius)}break;case"Polygon":var b=a;switch(b.$){case"Circle":var $=b.center,_={$:"Polygon"},k=t.center;_.center=k;var p=t.vertices;_.vertices=p,h=we($,Ne(_));var g=Te(b.center,h);o=x(Math.round(g*Math.pow(10,2))/Math.pow(10,2),b.radius);break;case"Polygon":var m={$:"Polygon"},w=b.center;m.center=w;var N=b.vertices;m.vertices=N;var S=Ne(m),M={$:"Polygon"},B=t.center;M.center=B;var P=t.vertices;M.vertices=P;var F=Ne(M),T=Ae(S,F),C=Ae(F,S),I=Ge(S,F),U=c(T,C);o=c(U,I)}}return o}var Re=null,Ve=null,Ze=null;function je(e,a,t){var r=a,n=t;switch(n.$){case"Cons":var i=n.head,o=function(a){var t={$:"Pair"},o=r.side;t.fst=o;var c=i.side;t.snd=c;var v=t.fst;switch(v.$){case"Blue":if("Blue"===t.snd.$){var u=e,l={$:"Body"},d=r.id;l.id=d;var h=r.hitbox;l.hitbox=h;var f=r.tick;l.tick=f;var b=r.effects;l.effects=b;var $=r.collidable;l.collidable=$;var _=r.side;l.side=_;var y=je(u,l,n.tail)(a)}else{var k=de(r.id,i.id),p=de(i.id,e),g=Oe(r.hitbox,i.hitbox),m=s(k,p);switch(s(m,g).$){case"True":var w=pe(Me(r.hitbox,i.hitbox)),x=e,N={$:"Body"},S=r.id;N.id=S;var M=r.hitbox;N.hitbox=M;var B=r.tick;N.tick=B;var P=r.effects;N.effects=P;var F=r.collidable;N.collidable=F;var T=r.side;N.side=T;var C=je(x,N,n.tail),I={$:"Cons"},U={$:"Pair"},E=w;U.fst=E;var A={$:"Body"},L=i.id;A.id=L;var G=i.hitbox;A.hitbox=G;var O=i.tick;A.tick=O;var R=i.effects;A.effects=R;var V=i.collidable;A.collidable=V;var Z=i.side;A.side=Z,U.snd=A,I.head=U;var j=a;I.tail=j,y=C(I);break;case"False":var q=e,D={$:"Body"},K=r.id;D.id=K;var W=r.hitbox;D.hitbox=W;var H=r.tick;D.tick=H;var Q=r.effects;D.effects=Q;var z=r.collidable;D.collidable=z;var Y=r.side;D.side=Y,y=je(q,D,n.tail)(a)}}break;case"Neutral":if("Neutral"===t.snd.$){var X=e,J={$:"Body"},ee=r.id;J.id=ee;var ae=r.hitbox;J.hitbox=ae;var te=r.tick;J.tick=te;var re=r.effects;J.effects=re;var ne=r.collidable;J.collidable=ne;var ie=r.side;J.side=ie,y=je(X,J,n.tail)(a)}else{k=de(r.id,i.id),p=de(i.id,e),g=Oe(r.hitbox,i.hitbox);var se=s(k,p);switch(s(se,g).$){case"True":w=pe(Me(r.hitbox,i.hitbox));var oe=e,ce={$:"Body"},ve=r.id;ce.id=ve;var ue=r.hitbox;ce.hitbox=ue;var le=r.tick;ce.tick=le;var he=r.effects;ce.effects=he;var fe=r.collidable;ce.collidable=fe;var be=r.side;ce.side=be;var $e=je(oe,ce,n.tail),_e={$:"Cons"},ye={$:"Pair"},ke=w;ye.fst=ke;var ge={$:"Body"},me=i.id;ge.id=me;var we=i.hitbox;ge.hitbox=we;var xe=i.tick;ge.tick=xe;var Ne=i.effects;ge.effects=Ne;var Se=i.collidable;ge.collidable=Se;var Be=i.side;ge.side=Be,ye.snd=ge,_e.head=ye;var Pe=a;_e.tail=Pe,y=$e(_e);break;case"False":var Fe=e,Te={$:"Body"},Ce=r.id;Te.id=Ce;var Ie=r.hitbox;Te.hitbox=Ie;var Ue=r.tick;Te.tick=Ue;var Ee=r.effects;Te.effects=Ee;var Ae=r.collidable;Te.collidable=Ae;var Le=r.side;Te.side=Le,y=je(Fe,Te,n.tail)(a)}}break;case"Red":if("Red"===t.snd.$){var Ge=e,Re={$:"Body"},Ve=r.id;Re.id=Ve;var Ze=r.hitbox;Re.hitbox=Ze;var qe=r.tick;Re.tick=qe;var De=r.effects;Re.effects=De;var Ke=r.collidable;Re.collidable=Ke;var We=r.side;Re.side=We,y=je(Ge,Re,n.tail)(a)}else{k=de(r.id,i.id),p=de(i.id,e),g=Oe(r.hitbox,i.hitbox);var He=s(k,p);switch(s(He,g).$){case"True":w=pe(Me(r.hitbox,i.hitbox));var Qe=e,ze={$:"Body"},Ye=r.id;ze.id=Ye;var Xe=r.hitbox;ze.hitbox=Xe;var Je=r.tick;ze.tick=Je;var ea=r.effects;ze.effects=ea;var aa=r.collidable;ze.collidable=aa;var ta=r.side;ze.side=ta;var ra=je(Qe,ze,n.tail),na={$:"Cons"},ia={$:"Pair"},sa=w;ia.fst=sa;var oa={$:"Body"},ca=i.id;oa.id=ca;var va=i.hitbox;oa.hitbox=va;var ua=i.tick;oa.tick=ua;var la=i.effects;oa.effects=la;var da=i.collidable;oa.collidable=da;var ha=i.side;oa.side=ha,ia.snd=oa,na.head=ia;var fa=a;na.tail=fa,y=ra(na);break;case"False":var ba=e,$a={$:"Body"},_a=r.id;$a.id=_a;var ya=r.hitbox;$a.hitbox=ya;var ka=r.tick;$a.tick=ka;var pa=r.effects;$a.effects=pa;var ga=r.collidable;$a.collidable=ga;var ma=r.side;$a.side=ma,y=je(ba,$a,n.tail)(a)}}break;default:y=null(v)(t.snd)}return y};break;case"Nil":o=function(e){return e}}return o}function qe(e,a,t){return je(e,a,t)({$:"Nil"})}function De(e,a){var t=e,r={$:"V2"},n=S(t.x,a);r.x=n;var i=S(t.y,a);return r.y=i,r}function Ke(e){var a=e;if("Body"===a.$)var t=function(e){return function(t){return function(r){return function(n){return function(i){var s=i;switch(s.$){case"Cons":var o=s.head,c=o.snd,v={$:"Body"},u=a.id;v.id=u;var l=a.hitbox;v.hitbox=l;var d=a.tick;v.tick=d;var h=a.effects;v.effects=h;var f=a.collidable;v.collidable=f;var b=a.side;v.side=b;var $=function(e,a,t,r,n,i,s){var o=e,c={$:"Pair"},v=o.collidable;c.fst=v;var u=a;if(c.snd=u,"Untouchable"===c.fst.$)if("Untouchable"===c.snd.$){var l={$:"Pair"},d=Pe(t,n);l.fst=d;var h=r;l.snd=h}else{l={$:"Pair"};var f=Pe(t,n);l.fst=f;var b=r;l.snd=b}else if("Untouchable"===c.snd.$){l={$:"Pair"};var $=Pe(t,n);l.fst=$;var _=r;l.snd=_}else{var y=Pe(t,n),k=Fe(o.hitbox,ye(y,t)),p=_e(r),g=ye(n,De(p,ge(n,p))),m={$:"Body"},w=o.id;m.id=w;var x=k;m.hitbox=x;var N=o.tick;m.tick=N;var S=o.effects;m.effects=S;var M=o.collidable;m.collidable=M;var B=o.side;m.side=B,l=We(m,t,g,i,s)}return l}(v,c.collidable,e,o.fst,t,r,n),_={$:"Body"},y=a.id;_.id=y;var k=a.hitbox;_.hitbox=k;var p=a.tick;_.tick=p;var g=a.effects;_.effects=g;var m=a.collidable;_.collidable=m;var w=a.side;_.side=w;var x=Ke(_)($.fst)($.snd)(r)(n)(s.tail);break;case"Nil":(x={$:"Pair"}).fst=e;var N=t;x.snd=N}return x}}}}};else t=null(a);return t}function We(e,a,t,r,n){var i=e,s=n;switch(s.$){case"Succ":var o=Pe(a,t),c=Fe(i.hitbox,ye(o,a)),v=i.id,u={$:"Body"},l=i.id;u.id=l;var d=c;u.hitbox=d;var h=i.tick;u.tick=h;var f=i.effects;u.effects=f;var b=i.collidable;u.collidable=b;var $=i.side;u.side=$;var _=qe(v,u,r);if("Nil"===_.$){(S={$:"Pair"}).fst=o;var y={$:"V2",x:0,y:0};S.snd=y}else{var k={$:"Body"},p=i.id;k.id=p;var g=i.hitbox;k.hitbox=g;var m=i.tick;k.tick=m;var w=i.effects;k.effects=w;var x=i.collidable;k.collidable=x;var N=i.side;k.side=N;var S=Ke(k)(a)(t)(r)(s.pred)(_)}break;case"Zero":(S={$:"Pair"}).fst=a;var M=t;S.snd=M}return S}function He(e,a){var t=e,r={$:"Body"},n=t.id;r.id=n;var i=t.hitbox;r.hitbox=i;var s=t.tick;r.tick=s;var o=a;r.effects=o;var c=t.collidable;r.collidable=c;var v=t.side;return r.side=v,r}function Qe(e,a){return e(a)}function ze(e,a){var t=e,r={$:"Body"},n=t.id;r.id=n;var i=t.hitbox;r.hitbox=i;var s=t.tick;r.tick=s;var o=t.effects;r.effects=o;var c=t.collidable;r.collidable=c;var v=t.side;return r.side=v,function(e,a,t){for(;;){var r=t;switch(r.$){case"Cons":var n=He(e,r.tail),i=n,s=a,o=s.game_map,c=j(0,o.bodies,i.id,n),v=r.head,u={$:"State"},l=s.next_id;u.next_id=l;var d=s.tick;u.tick=d;var h=s.players;u.players=h;var f=s.hero_states;u.hero_states=f;var b={$:"GameMap"},$=o.width;b.width=$;var _=o.height;b.height=_;var y=c;b.bodies=y;var k=o.bodies_count;b.bodies_count=k,u.game_map=b,e=n,a=Qe(v,u),t=r.tail;continue;case"Nil":var p=a}return p}}(r,a,t.effects)}function Ye(e,a){return function(e,a,t){var r=a,n=t,i=(r.has(n)?r.get(n):r.get(-1n),r);return r.set(n,{$:"None"}),i}(0,a,e)}function Xe(e,a){return Z(0,a,e)}function Je(e,a){var t=e,r=function(e,a){var t=e,r=Ye(a,t.bodies),n={$:"GameMap"},i=t.width;n.width=i;var s=t.height;n.height=s;var o=r;n.bodies=o;var c=t.bodies_count;return n.bodies_count=c,n}(t.game_map,a),n={$:"State"},i=t.next_id;n.next_id=i;var s=t.tick;n.tick=s;var o=t.players;n.players=o;var c=t.hero_states;n.hero_states=c;var v=r;return n.game_map=v,n}function ea(e,a){var t=e,r=a,n=t.bodies,i=r.id,s={$:"Body"},o=r.id;s.id=o;var c=r.hitbox;s.hitbox=c;var v=r.tick;s.tick=v;var u=r.effects;s.effects=u;var l=r.collidable;s.collidable=l;var d=r.side;s.side=d;var h=function(e,a,t,r){switch(Z(0,a,t).$){case"None":var n=a;break;case"Some":var i=a,s=t,o={$:"Some"},c=r;o.value=c,i.has(s)?i.get(s):i.get(-1n);var v=i;i.set(s,o),n=v}return n}(0,n,i,s);switch(oe(r.id,t.bodies_count).$){case"True":var f={$:"GameMap"},b=t.width;f.width=b;var $=t.height;f.height=$;var _=h;f.bodies=_;var y=r.id;f.bodies_count=y;break;case"False":f={$:"GameMap"};var k=t.width;f.width=k;var p=t.height;f.height=p;var g=h;f.bodies=g;var m=t.bodies_count;f.bodies_count=m}return f}function aa(e,a){var t=e,r=ea(t.game_map,a),n={$:"State"},i=t.next_id;n.next_id=i;var s=t.tick;n.tick=s;var o=t.players;n.players=o;var c=t.hero_states;n.hero_states=c;var v=r;return n.game_map=v,n}var ta=function(e){return function(a){return function(t){return function(r){return function(n){return function(i){return function(s){return function(o){return function(e,a,t,r,n,i,s,o){var v=o,u=v.game_map,l=Xe(e,u.bodies);switch(l.$){case"None":var d={$:"State"},h=v.next_id;d.next_id=h;var f=v.tick;d.tick=f;var b=v.players;d.players=b;var _=v.hero_states;d.hero_states=_;var k={$:"GameMap"},p=u.width;k.width=p;var g=u.height;k.height=g;var m=u.bodies;k.bodies=m;var w=u.bodies_count;k.bodies_count=w,d.game_map=k;break;case"Some":var S=l.value,M=ye(t,Be(S.hitbox));switch(c($($e(M),20),x(r,0)).$){case"True":var B={$:"State"},P=v.next_id;B.next_id=P;var F=v.tick;B.tick=F;var T=v.players;B.players=T;var C=v.hero_states;B.hero_states=C;var I={$:"GameMap"},U=u.width;I.width=U;var E=u.height;I.height=E;var A=u.bodies;I.bodies=A;var L=u.bodies_count;I.bodies_count=L,B.game_map=I,d=Je(B,e);break;case"False":var G=y(a,n),O=Math.round(G*Math.pow(10,2))/Math.pow(10,2),R=N(O,r),V=pe(De(_e(M),R)),Z=Fe(S.hitbox,V),j={$:"State"},q=v.next_id;j.next_id=q;var D=v.tick;j.tick=D;var K=v.players;j.players=K;var W=v.hero_states;j.hero_states=W;var H={$:"GameMap"},Q=u.width;H.width=Q;var z=u.height;H.height=z;var Y=u.bodies;H.bodies=Y;var X=u.bodies_count;H.bodies_count=X,j.game_map=H;var J={$:"Body"},ee=S.id;J.id=ee;var ae=Z;J.hitbox=ae;var te=S.tick;J.tick=te;var re=S.effects;J.effects=re;var ne=S.collidable;J.collidable=ne;var ie=S.side;J.side=ie;var se=Qe(s,aa(j,J));switch(oe(i,0n).$){case"True":var ce=i,ve=ta(e)(O)(t)(r)(n)(BigInt.asUintN(64,ce-1n))(s),ue=se,le={$:"Body"},de=S.id;le.id=de;var he=Z;le.hitbox=he;var fe=S.tick;le.tick=fe;var be={$:"Cons"},ke=ve;be.head=ke;var ge=S.effects;be.tail=ge,le.effects=be;var me=S.collidable;le.collidable=me;var we=S.side;le.side=we,d=aa(ue,le);break;case"False":d=Je(se,e)}}}return d}(e,a,t,r,n,i,s,o)}}}}}}}};function ra(e,a,t,r,n){var i=n;switch(i.$){case"Cons":var s=i.head,o=function(n){var o=s.snd;switch(R(e,o.id).$){case"True":var v=ra(e,a,t,r,i.tail)(n);break;case"False":var u=function(e,a,t,r){var n=a,i=t;if("TakesEffects"===i.collidable.$){var s=r,o=Z(0,s.hero_states,i.id);switch(o.$){case"Some":var v=o.value,u=he(v.health,e),l=s.hero_states,d=i.id,h={$:"HeroState"},f=v.cooldowns;h.cooldowns=f;var b=u;h.health=b;var $=j(0,l,d,h),_={$:"State"},y=s.next_id;_.next_id=y;var k=s.tick;_.tick=k;var p=s.players;_.players=p;var g=$;_.hero_states=g;var m=s.game_map;_.game_map=m;var w=Je(_,n.id);switch(c(ue(u,0n),ce(e,v.health)).$){case"True":var x=Je(w,i.id);break;case"False":x=w}break;case"None":x=r}}else x=r;return x}(t,r,s.snd,n);v=ra(e,a,t,r,i.tail)(u)}return v};break;case"Nil":o=function(e){return e}}return o}function na(e,a){return Z(0,e,a)}var ia=function(e){return function(a){return function(t){return function(r){return function(e,a,t,r){var n=r.game_map,i=q(Ze,n.bodies,n.bodies_count),s=na(n.bodies,a);switch(s.$){case"Some":s.value;var o=qe(e,s.value,i),c=ra(e,a,t,s.value,o)(r);break;case"None":c=r}return c}(e,a,t,r)}}}};function sa(e,a,t){var r=t;switch(r.$){case"Cons":var n=r.head,i=function(t){var i=n.snd;switch(R(e,i.id).$){case"True":var s=t,o=sa(e,a,r.tail)(s);break;case"False":var v=a,u={$:"Body"},l=i.id;u.id=l;var d=i.hitbox;u.hitbox=d;var h=i.tick;u.tick=h;var f=i.effects;u.effects=f;var b=i.collidable;u.collidable=b;var $=i.side;u.side=$,s=function(e,a,t,r){var n=t;if("TakesEffects"===n.collidable.$){var i=r,s=Z(0,i.hero_states,n.id);switch(s.$){case"Some":var o=s.value,v=he(o.health,e),u=i.hero_states,l=n.id,d={$:"HeroState"},h=o.cooldowns;d.cooldowns=h;var f=v;d.health=f;var b=j(0,u,l,d);switch(c(ue(v,0n),ce(e,o.health)).$){case"True":var $={$:"State"},_=i.next_id;$.next_id=_;var y=i.tick;$.tick=y;var k=i.players;$.players=k;var p=b;$.hero_states=p;var g=i.game_map;$.game_map=g;var m=Je($,n.id);break;case"False":m={$:"State"};var w=i.next_id;m.next_id=w;var x=i.tick;m.tick=x;var N=i.players;m.players=N;var S=b;m.hero_states=S;var M=i.game_map;m.game_map=M}break;case"None":m=r}}else m=r;return m}(v,0,n.snd,t),o=sa(e,a,r.tail)(s)}return o};break;case"Nil":i=function(e){return e}}return i}function oa(e,a){var t=W(X,null,ae,e.keys)(a);switch(t.$){case"None":(r={$:"V2"}).x=0,r.y=0;break;case"Some":var r=t.value.snd}return r}function ca(e){var a=e,t=a.next_id,r=BigInt.asUintN(64,t+1n),n={$:"Pair"},i=a.next_id;n.fst=i;var s={$:"State"},o=r;s.next_id=o;var c=a.tick;s.tick=c;var v=a.players;s.players=v;var u=a.hero_states;s.hero_states=u;var l=a.game_map;return s.game_map=l,n.snd=s,n}function va(e,a,t){var r=k(a,2),n=Se(B(0,r),t),i=Se(r,t),s=Se(r,0),o=Se(B(0,r),0),c={$:"Polygon"},v=e;c.center=v;var u={$:"Cons"},l=n;u.head=l;var d={$:"Cons"},h=i;d.head=h;var f={$:"Cons"},b=s;f.head=b;var $={$:"Cons"},_=o;return $.head=_,$.tail={$:"Nil"},f.tail=$,d.tail=f,u.tail=d,c.vertices=u,c}function ua(e,a){var t=e;switch(t.$){case"Circle":var r={$:"Circle"},n=t.center;r.center=n;var i=t.radius;r.radius=i;break;case"Polygon":var s=E(be,be,t.vertices,(function(e){return function(e,a){var t=e,r=a,n=Math.cos(r),i=a,s=Math.sin(i),o=B(S(t.x,n),S(t.y,s)),c=y(S(t.x,s),S(t.y,n)),v={$:"V2"},u=o;v.x=u;var l=c;return v.y=l,v}(e,a)})),o=(r={$:"Polygon"},t.center);r.center=o;var c=s;r.vertices=c}return r}function la(e,a){var t=e,r=a,n=t.bodies,i=r.id,s={$:"Body"},o=r.id;s.id=o;var c=r.hitbox;s.hitbox=c;var v=r.tick;s.tick=v;var u=r.effects;s.effects=u;var l=r.collidable;s.collidable=l;var d=r.side;s.side=d;var h=j(0,n,i,s);switch(na(h,r.id),oe(r.id,t.bodies_count).$){case"True":var f={$:"GameMap"},b=t.width;f.width=b;var $=t.height;f.height=$;var _=h;f.bodies=_;var y=r.id;f.bodies_count=y;break;case"False":f={$:"GameMap"};var k=t.width;f.width=k;var p=t.height;f.height=p;var g=h;f.bodies=g;var m=t.bodies_count;f.bodies_count=m}return f}function da(e,a){var t=e,r=la(t.game_map,a),n={$:"State"},i=t.next_id;n.next_id=i;var s=t.tick;n.tick=s;var o=t.players;n.players=o;var c=t.hero_states;n.hero_states=c;var v=r;return n.game_map=v,n}var ha=function(e){return function(a){return function(t){return function(r){return function(n){return function(i){return function(e,a,t,r,n,i){var s=i,o=s.game_map,c=Xe(e,o.bodies);switch(c.$){case"None":var v={$:"State"},u=s.next_id;v.next_id=u;var l=s.tick;v.tick=l;var d=s.players;v.players=d;var h=s.hero_states;v.hero_states=h;var f={$:"GameMap"},b=o.width;f.width=b;var k=o.height;f.height=k;var p=o.bodies;f.bodies=p;var m=o.bodies_count;f.bodies_count=m,v.game_map=f;break;case"Some":var w=Xe(a,o.bodies);switch(w.$){case"None":v={$:"State"};var x=s.next_id;v.next_id=x;var N=s.tick;v.tick=N;var M=s.players;v.players=M;var P=s.hero_states;v.hero_states=P;var F={$:"GameMap"},T=o.width;F.width=T;var C=o.height;F.height=C;var I=o.bodies;F.bodies=I;var U=o.bodies_count;F.bodies_count=U,v.game_map=F;break;case"Some":var E=Z(0,s.players,a);switch(E.$){case"None":v={$:"State"};var A=s.next_id;v.next_id=A;var L=s.tick;v.tick=L;var G=s.players;v.players=G;var O=s.hero_states;v.hero_states=O;var R={$:"GameMap"},V=o.width;R.width=V;var j=o.height;R.height=j;var q=o.bodies;R.bodies=q;var D=o.bodies_count;R.bodies_count=D,v.game_map=R;break;case"Some":var K=Be(w.value.hitbox),W=va(K,t,r),H=c.value,Q=function(e,a){var t=e,r=a,n=B(r.x,t.x),i=B(r.y,t.y);return B(0,Math.atan2(n,i))}(K,E.value.target),z=Math.round(Q*Math.pow(10,2))/Math.pow(10,2),Y=function(e){var a=e;switch(a.$){case"Circle":var t=0;break;case"Polygon":var r=a.vertices;switch(r.$){case"Nil":t=0;break;case"Cons":var n=r.tail;switch(n.$){case"Nil":t=0;break;case"Cons":var i=B(Ce(n.head),Ce(r.head)),s=B(Ie(n.head),Ie(r.head)),o=i;t=Math.atan2(s,o)}}}return t}(H.hitbox),X=Math.round(Y*Math.pow(10,2))/Math.pow(10,2),J=B(z,X),ee=function(e){switch(g(_(e),3.1415).$){case"True":switch(g(e,0).$){case"True":var a=B(e,S(2,3.1415));break;case"False":a=y(e,S(2,3.1415))}break;case"False":a=e}return a}(Math.round(J*Math.pow(10,2))/Math.pow(10,2)),ae=Math.round(ee*Math.pow(10,2))/Math.pow(10,2);switch(g(_(ae),n).$){case"True":var te=X,re=S(n,function(e){switch(g(e,0).$){case"True":var a=1;break;case"False":switch($(e,0).$){case"True":a=-1;break;case"False":a=0}}return a}(ae)),ne=y(te,Math.round(re*Math.pow(10,2))/Math.pow(10,2)),ie=ua(W,Math.round(ne*Math.pow(10,2))/Math.pow(10,2)),se={$:"State"},oe=s.next_id;se.next_id=oe;var ce=s.tick;se.tick=ce;var ve=s.players;se.players=ve;var ue=s.hero_states;se.hero_states=ue;var le={$:"GameMap"},de=o.width;le.width=de;var he=o.height;le.height=he;var fe=o.bodies;le.bodies=fe;var be=o.bodies_count;le.bodies_count=be,se.game_map=le;var $e={$:"Body"},_e=H.id;$e.id=_e;var ye=ie;$e.hitbox=ye;var ke=H.tick;$e.tick=ke;var pe=H.effects;$e.effects=pe;var ge=H.collidable;$e.collidable=ge;var me=H.side;$e.side=me;var we=da(se,$e),xe={$:"Body"},Ne=H.id;xe.id=Ne;var Se=ie;xe.hitbox=Se;var Me=H.tick;xe.tick=Me;var Pe=H.effects;xe.effects=Pe;var Fe=H.collidable;xe.collidable=Fe;var Te=H.side;xe.side=Te,v=ze(xe,we);break;case"False":ie=ua(W,z);var Ue={$:"State"},Ee=s.next_id;Ue.next_id=Ee;var Ae=s.tick;Ue.tick=Ae;var Le=s.players;Ue.players=Le;var Ge=s.hero_states;Ue.hero_states=Ge;var Oe={$:"GameMap"},Re=o.width;Oe.width=Re;var Ve=o.height;Oe.height=Ve;var Ze=o.bodies;Oe.bodies=Ze;var je=o.bodies_count;Oe.bodies_count=je,Ue.game_map=Oe;var qe={$:"Body"},De=H.id;qe.id=De;var Ke=ie;qe.hitbox=Ke;var We=H.tick;qe.tick=We;var He=H.effects;qe.effects=He;var Qe=H.collidable;qe.collidable=Qe;var Ye=H.side;qe.side=Ye,we=da(Ue,qe);var Je={$:"Body"},ea=H.id;Je.id=ea;var aa=ie;Je.hitbox=aa;var ta=H.tick;Je.tick=ta;var ra=H.effects;Je.effects=ra;var na=H.collidable;Je.collidable=na;var ia=H.side;Je.side=ia,v=ze(Je,we)}}}}return v}(e,a,t,r,n,i)}}}}}};var fa=function(e){return function(a){return function(e,a){return da(a,e)}(e,a)}};var ba=function(e){return function(a){return function(t){return function(r){return function(e,a,t,r){var n=r,i=n.game_map,s=Xe(a,i.bodies);switch(s.$){case"None":var o={$:"State"},c=n.next_id;o.next_id=c;var v=n.tick;o.tick=v;var u=n.players;o.players=u;var l=n.hero_states;o.hero_states=l;var d={$:"GameMap"},h=i.width;d.width=h;var f=i.height;d.height=f;var b=i.bodies;d.bodies=b;var $=i.bodies_count;d.bodies_count=$,o.game_map=d;break;case"Some":var _=s.value;switch(oe(e,0n).$){case"False":var y=Ye(a,i.bodies),k=(o={$:"State"},n.next_id);o.next_id=k;var p=n.tick;o.tick=p;var g=n.players;o.players=g;var m=n.hero_states;o.hero_states=m;var w={$:"GameMap"},x=i.width;w.width=x;var N=i.height;w.height=N;var S=y;w.bodies=S;var M=i.bodies_count;w.bodies_count=M,o.game_map=w;break;case"True":var B=e,P=BigInt.asUintN(64,B-1n),F=ba(P)(a)(t),T={$:"State"},C=n.next_id;T.next_id=C;var I=n.tick;T.tick=I;var U=n.players;T.players=U;var E=n.hero_states;T.hero_states=E;var A={$:"GameMap"},L=i.width;A.width=L;var G=i.height;A.height=G;var O=i.bodies;A.bodies=O;var R=i.bodies_count;A.bodies_count=R,T.game_map=A;var V={$:"Body"},Z=_.id;V.id=Z;var j=_.hitbox;V.hitbox=j;var q=_.tick;V.tick=q;var D={$:"Cons"},K=F;D.head=K;var W=_.effects;D.tail=W,V.effects=D;var H=_.collidable;V.collidable=H;var Q=_.side;V.side=Q,o=Qe(t,da(T,V))}}return o}(e,a,t,r)}}}};function $a(e,a,t){return function(e,a,t,r){var n=t,i=Z(0,n.hero_states,e);switch(i.$){case"None":var s={$:"State"},o=n.next_id;s.next_id=o;var c=n.tick;s.tick=c;var v=n.players;s.players=v;var u=n.hero_states;s.hero_states=u;var l=n.game_map;s.game_map=l;break;case"Some":var d=i.value,h=X,f=ae,b=d.cooldowns,$={$:"Pair"},_=a;$.fst=_;var y=r;$.snd=y;var k=Q(h,null,f,b,$),p=n.hero_states,g=e,m={$:"HeroState"},w=k;m.cooldowns=w;var x=d.health;m.health=x;var N=j(0,p,g,m),S=(s={$:"State"},n.next_id);s.next_id=S;var M=n.tick;s.tick=M;var B=n.players;s.players=B;var P=N;s.hero_states=P;var F=n.game_map;s.game_map=F}return s}(a,r("RightClick"),t,e)}var _a=function(e){return function(a){return function(t){return function(n){return function(i){return function(s){return function(e,a,t,n,i,s){var o=s,c=o.game_map,v=Z(0,o.players,e);switch(v.$){case"None":var u={$:"State"},l=o.next_id;u.next_id=l;var d=o.tick;u.tick=d;var h=o.players;u.players=h;var f=o.hero_states;u.hero_states=f;var b={$:"GameMap"},$=c.width;b.width=$;var _=c.height;b.height=_;var y=c.bodies;b.bodies=y;var k=c.bodies_count;b.bodies_count=k,u.game_map=b;break;case"Some":var p=v.value,g=Xe(p.hero.body_id,c.bodies);switch(g.$){case"None":u={$:"State"};var m=o.next_id;u.next_id=m;var w=o.tick;u.tick=w;var x=o.players;u.players=x;var N=o.hero_states;u.hero_states=N;var S={$:"GameMap"},M=c.width;S.width=M;var B=c.height;S.height=B;var P=c.bodies;S.bodies=P;var F=c.bodies_count;S.bodies_count=F,u.game_map=S;break;case"Some":var T=g.value,C=Be(T.hitbox),I={$:"Player"},U=p.id;I.id=U;var E=p.name;I.name=E;var A=p.keys;I.keys=A;var L=p.target;I.target=L;var G=p.hero;I.hero=G;var O=pe(_e(ye(oa(I,r("R")),C))),R=pe(Pe(C,De(O,n))),V={$:"State"},j=o.next_id;V.next_id=j;var D=o.tick;V.tick=D;var K=o.players;V.players=K;var W=o.hero_states;V.hero_states=W;var H={$:"GameMap"},Q=c.width;H.width=Q;var z=c.height;H.height=z;var Y=c.bodies;H.bodies=Y;var X=c.bodies_count;H.bodies_count=X,V.game_map=H;var J=ca(V),ee=function(e,a,t,r,n,i,s,o){_e(ye(s,i));var c=va(i,t,r),v=ha(e)(a)(t)(r)(n),u={$:"Body"},l=e;u.id=l;var d=c;u.hitbox=d;var h=v;u.tick=h,u.effects={$:"Nil"},u.collidable={$:"Untouchable"};var f=o;return u.side=f,u}(J.fst,e,t,n,i,C,R,T.side),ae=fa(ee),te=ba(a)(J.fst)(function(e){return function(a){return function(t){return function(r){return function(e,a,t,r){var n=r.game_map,i=q(Ze,n.bodies,n.bodies_count),s=na(n.bodies,a);switch(s.$){case"Some":var o=s.value,c=e,v={$:"Body"},u=o.id;v.id=u;var l=o.hitbox;v.hitbox=l;var d=o.tick;v.tick=d;var h=o.effects;v.effects=h;var f=o.collidable;v.collidable=f;var b=o.side;v.side=b;var $=sa(e,t,qe(c,v,i))(r);break;case"None":$=r}return $}(e,a,t,r)}}}}(T.id)(J.fst)(1n)),re=Qe(ae,J.snd);u=Qe(te,$a(a,e,re))}}return u}(e,a,t,n,i,s)}}}}}};function ya(e,a,t,r,n){var i=t,s=r;if("TakesEffects"===s.collidable.$){var o=n,v=Z(0,o.players,s.id);switch(v.$){case"None":var u=n;break;case"Some":var l=v.value,d=Be(i.hitbox),h=function(e,a){var t=e,r=a,n={$:"V2"},i=S(t.x,r.x);n.x=i;var s=S(t.y,r.y);return n.y=s,n}(_e(ye(Be(s.hitbox),d)),e),f=Fe(s.hitbox,h),b=Be(f),$=Z(0,o.hero_states,l.id);switch($.$){case"None":u=n;break;case"Some":var _=$.value,y=he(_.health,a),k=o.hero_states,p=l.id,g={$:"HeroState"},m=_.cooldowns;g.cooldowns=m;var w=y;g.health=w;var x=j(0,k,p,g),N=o.players,M=l.id,B={$:"Player"},P=l.id;B.id=P;var F=l.name;B.name=F;var T=l.keys;B.keys=T;var C=b;B.target=C;var I=l.hero;B.hero=I;var U=j(0,N,M,B),E=o.game_map,A={$:"Body"},L=s.id;A.id=L;var G=f;A.hitbox=G;var O=s.tick;A.tick=O;var R=s.effects;A.effects=R;var V=s.collidable;A.collidable=V;var q=s.side;A.side=q;var D=ea(E,A);switch(c(ue(y,0n),ce(a,_.health)).$){case"True":var K={$:"State"},W=o.next_id;K.next_id=W;var H=o.tick;K.tick=H;var Q=U;K.players=Q;var z=x;K.hero_states=z;var Y=D;K.game_map=Y,u=Je(K,s.id);break;case"False":u={$:"State"};var X=o.next_id;u.next_id=X;var J=o.tick;u.tick=J;var ee=U;u.players=ee;var ae=x;u.hero_states=ae;var te=D;u.game_map=te}}}}else u=n;return u}function ka(e,a,t,r,n){var i=n;switch(i.$){case"Cons":var s=i.head,o=function(n){var o=s.snd;switch(R(e,o.id).$){case"True":var c=n,v=ka(e,a,t,r,i.tail)(c);break;case"False":c=ya(a,t,r,s.snd,n),v=ka(e,a,t,r,i.tail)(c)}return v};break;case"Nil":o=function(e){return e}}return o}var pa=function(e){return function(a){return function(t){return function(r){return function(n){return function(e,a,t,r,n){var i=n.game_map,s=q(Ze,i.bodies,i.bodies_count),o=na(i.bodies,a);switch(o.$){case"Some":o.value;var c=qe(e,o.value,s),v=ka(e,t,r,o.value,c)(n);break;case"None":v=n}return v}(e,a,t,r,n)}}}}};function ga(e){var a=e,t={$:"V2"},r=b(a.y);t.x=r;var n=a.x;return t.y=n,t}function ma(e,a){var t={$:"Circle"},r=e;t.center=r;var n=a;return t.radius=n,t}var wa=function(e){return function(a){return function(e,a){var t=a,r=t.game_map,n=Xe(e,r.bodies);switch(n.$){case"None":var i={$:"State"},s=t.next_id;i.next_id=s;var o=t.tick;i.tick=o;var c=t.players;i.players=c;var v=t.hero_states;i.hero_states=v;var u={$:"GameMap"},l=r.width;u.width=l;var d=r.height;u.height=d;var h=r.bodies;u.bodies=h;var f=r.bodies_count;u.bodies_count=f,i.game_map=u;break;case"Some":var b=n.value,$={$:"State"},_=t.next_id;$.next_id=_;var y=t.tick;$.tick=y;var k=t.players;$.players=k;var p=t.hero_states;$.hero_states=p;var g={$:"GameMap"},m=r.width;g.width=m;var w=r.height;g.height=w;var x=r.bodies;g.bodies=x;var N=r.bodies_count;g.bodies_count=N,$.game_map=g,i=ze(b,$)}return i}(e,a)}};function xa(e,a,t,r,n){var i={$:"Body"},s=e;i.id=s;var o=ma(a,r);i.hitbox=o;var c=wa(e);i.tick=c,i.effects={$:"Nil"},i.collidable={$:"Untouchable"};var v=n;return i.side=v,i}function Na(e,a,t,n,i,s){var o=e,c=a,v=Be(o.hitbox),u={$:"Player"},l=c.id;u.id=l;var d=c.name;u.name=d;var h=c.keys;u.keys=h;var f=c.target;u.target=f;var $=c.hero;u.hero=$;var _=oa(u,r("Q")),y=(c.target,_e(ye(_,v))),p=ga(y),g=v,m=Pe(De(y,40),De(p,b(30))),w=pe(Pe(g,m)),x=v,M=Pe(De(y,40),De(p,30)),P=pe(Pe(x,M)),F=pe(Pe(v,De(y,40))),T=function(e,a,t){var r=_e(ye(a,e)),n=ga(r),i=S(B(1,N(1,k($e(ye(a,e)),t))),1),s=De(n,S(i,t)),o=Pe(e,De(r,t)),c=pe(Pe(e,De(r,$e(ye(o,s))))),v=pe(ye(c,s)),u=pe(Pe(c,s)),l={$:"Pair"},d=c;l.fst=d;var h={$:"Pair"},f=v;h.fst=f;var b=u;return h.snd=b,l.snd=h,l}(v,_,t),C=T.snd,I=ca(s),U=I.fst,E=F,A=(T.fst,xa(U,E,0,i,o.side)),L=ca(I.snd),G=L.fst,O=w,R=(C.fst,xa(G,O,0,i,o.side)),V=ca(L.snd),Z=V.fst,j=P,q=(C.snd,xa(Z,j,0,i,o.side)),D=fa(A),K=ta(I.fst)(1)(T.fst)(t)(.1)(n)(ia(c.id)(I.fst)(147n)),W=fa(R),H=ta(L.fst)(1)(C.fst)(t)(.1)(n)(ia(c.id)(L.fst)(147n)),Q=fa(q),z=ta(V.fst)(1)(C.snd)(t)(.1)(n)(ia(c.id)(V.fst)(147n)),Y=Qe(D,V.snd),X=Qe(W,Y),J=Qe(Q,X),ee=Qe(K,J),ae=Qe(H,ee);return Qe(z,ae)}var Sa=function(e){return function(a){return function(t){return function(r){return function(n){return function(e,a,t,r,n){var i=n,s=i.game_map,o=Z(0,i.players,e);switch(o.$){case"None":var c={$:"State"},v=i.next_id;c.next_id=v;var u=i.tick;c.tick=u;var l=i.players;c.players=l;var d=i.hero_states;c.hero_states=d;var h={$:"GameMap"},f=s.width;h.width=f;var b=s.height;h.height=b;var $=s.bodies;h.bodies=$;var _=s.bodies_count;h.bodies_count=_,c.game_map=h;break;case"Some":var y=o.value,k=y.hero,p=Xe(k.body_id,s.bodies);switch(p.$){case"None":c={$:"State"};var g=i.next_id;c.next_id=g;var m=i.tick;c.tick=m;var w=i.players;c.players=w;var x=i.hero_states;c.hero_states=x;var N={$:"GameMap"},S=s.width;N.width=S;var M=s.height;N.height=M;var B=s.bodies;N.bodies=B;var P=s.bodies_count;N.bodies_count=P,c.game_map=N;break;case"Some":var F=p.value,T={$:"Player"},C=y.id;T.id=C;var I=y.name;T.name=I;var U=y.keys;T.keys=U;var E=y.target;T.target=E;var A={$:"Hero"},L=k.owner_id;A.owner_id=L;var G=k.name;A.name=G;var O=k.skills;A.skills=O;var R=k.body_id;A.body_id=R,T.hero=A;var V=a,j=t,q=r,D={$:"State"},K=i.next_id;D.next_id=K;var W=i.tick;D.tick=W;var H=i.players;D.players=H;var Q=i.hero_states;D.hero_states=Q;var z={$:"GameMap"},Y=s.width;z.width=Y;var X=s.height;z.height=X;var J=s.bodies;z.bodies=J;var ee=s.bodies_count;z.bodies_count=ee,D.game_map=z,c=Na(F,T,V,j,q,D)}}return c}(e,a,t,r,n)}}}}},Ma=function(e){return function(a){return function(t){return function(e,a,t){var r=t,n=r.game_map,i={$:"Pair"},s=Z(0,r.players,e);i.fst=s;var o=na(n.bodies,a);i.snd=o;var c=i.fst;switch(c.$){case"None":if("None"===i.snd.$){var v={$:"State"},u=r.next_id;v.next_id=u;var l=r.tick;v.tick=l;var d=r.players;v.players=d;var h=r.hero_states;v.hero_states=h;var f={$:"GameMap"},b=n.width;f.width=b;var _=n.height;f.height=_;var y=n.bodies;f.bodies=y;var k=n.bodies_count;f.bodies_count=k,v.game_map=f}else{v={$:"State"};var p=r.next_id;v.next_id=p;var g=r.tick;v.tick=g;var m=r.players;v.players=m;var w=r.hero_states;v.hero_states=w;var x={$:"GameMap"},S=n.width;x.width=S;var M=n.height;x.height=M;var B=n.bodies;x.bodies=B;var P=n.bodies_count;x.bodies_count=P,v.game_map=x}break;case"Some":var F=c.value;if("Player"===F.$){var T=i.snd;switch(T.$){case"None":v={$:"State"};var C=r.next_id;v.next_id=C;var I=r.tick;v.tick=I;var U=r.players;v.players=U;var E=r.hero_states;v.hero_states=E;var A={$:"GameMap"},L=n.width;A.width=L;var G=n.height;A.height=G;var O=n.bodies;A.bodies=O;var R=n.bodies_count;A.bodies_count=R,v.game_map=A;break;case"Some":var V=T.value,j=n.bodies_count,D=Be(V.hitbox),K=ye(F.target,D),W=$e(K);switch($(W,.1).$){case"True":v={$:"State"};var H=r.next_id;v.next_id=H;var Q=r.tick;v.tick=Q;var z=r.players;v.players=z;var Y=r.hero_states;v.hero_states=Y;var X={$:"GameMap"},J=n.width;X.width=J;var ee=n.height;X.height=ee;var ae=n.bodies;X.bodies=ae;var te=j;X.bodies_count=te,v.game_map=X;break;case"False":var re=pe(De(_e(K),N(1.15,W))),ne=q(Ze,n.bodies,n.bodies_count),ie={$:"Body"},se=V.id;ie.id=se;var oe=V.hitbox;ie.hitbox=oe;var ce=V.tick;ie.tick=ce;var ve=V.effects;ie.effects=ve;var ue=V.collidable;ie.collidable=ue;var le=V.side;ie.side=le;var de=function(e,a,t){var r=e,n=Be(r.hitbox),i={$:"Body"},s=r.id;i.id=s;var o=r.hitbox;i.hitbox=o;var c=r.tick;i.tick=c;var v=r.effects;i.effects=v;var u=r.collidable;i.collidable=u;var l=r.side;i.side=l;var d=n,h=a,f=t,b={$:"Succ"},$={$:"Succ"},_={$:"Succ",pred:{$:"Zero"}};return $.pred=_,b.pred=$,We(i,d,h,f,b)}(ie,re,ne),he=Fe(V.hitbox,ye(pe(de.fst),D)),fe={$:"GameMap"},be=n.width;fe.width=be;var ke=n.height;fe.height=ke;var ge=n.bodies;fe.bodies=ge;var me=n.bodies_count;fe.bodies_count=me;var we={$:"Body"},xe=V.id;we.id=xe;var Ne=he;we.hitbox=Ne;var Se=V.tick;we.tick=Se;var Me=V.effects;we.effects=Me;var Pe=V.collidable;we.collidable=Pe;var Te=V.side;we.side=Te;var Ce=la(fe,we),Ie=(v={$:"State"},r.next_id);v.next_id=Ie;var Ue=r.tick;v.tick=Ue;var Ee=r.players;v.players=Ee;var Ae=r.hero_states;v.hero_states=Ae;var Le=Ce;v.game_map=Le}}}else v=null(F)(i.snd);break;default:v=null(c)(i.snd)}return v}(e,a,t)}}};var Ba=function(e){return function(a){return function(t){return function(r){return function(n){return function(i){return function(s){return function(e,a,t,r,n,i,s){var o=s,v=o.game_map,u=Xe(e,v.bodies);switch(u.$){case"None":var l={$:"State"},d=o.next_id;l.next_id=d;var h=o.tick;l.tick=h;var f=o.players;l.players=f;var b=o.hero_states;l.hero_states=b;var _={$:"GameMap"},y=v.width;_.width=y;var k=v.height;_.height=k;var p=v.bodies;_.bodies=p;var g=v.bodies_count;_.bodies_count=g,l.game_map=_;break;case"Some":var m=u.value,w=pe(ye(t,Be(m.hitbox))),S=$e(w);switch(c($(Math.round(S*Math.pow(10,2))/Math.pow(10,2),1),x(r,0)).$){case"True":var M={$:"State"},B=o.next_id;M.next_id=B;var P=o.tick;M.tick=P;var F=o.players;M.players=F;var T=o.hero_states;M.hero_states=T;var C={$:"GameMap"},I=v.width;C.width=I;var U=v.height;C.height=U;var E=v.bodies;C.bodies=E;var A=v.bodies_count;C.bodies_count=A,M.game_map=C,l=Je(M,e);break;case"False":var L=N(a,r),G=pe(De(_e(w),L)),O=Fe(m.hitbox,G),R={$:"State"},V=o.next_id;R.next_id=V;var Z=o.tick;R.tick=Z;var j=o.players;R.players=j;var q=o.hero_states;R.hero_states=q;var D={$:"GameMap"},K=v.width;D.width=K;var W=v.height;D.height=W;var H=v.bodies;D.bodies=H;var Q=v.bodies_count;D.bodies_count=Q,R.game_map=D;var z={$:"Body"},Y=m.id;z.id=Y;var X=O;z.hitbox=X;var J=m.tick;z.tick=J;var ee=m.effects;z.effects=ee;var ae=m.collidable;z.collidable=ae;var te=m.side;z.side=te;var re=Qe(i,aa(R,z));switch(oe(n,0n).$){case"True":var ne=n,ie=Ba(e)(a)(t)(r)(BigInt.asUintN(64,ne-1n))(i),se=re,ce={$:"Body"},ve=m.id;ce.id=ve;var ue=O;ce.hitbox=ue;var le=m.tick;ce.tick=le;var de={$:"Cons"},he=ie;de.head=he;var fe=m.effects;de.tail=fe,ce.effects=de;var be=m.collidable;ce.collidable=be;var ke=m.side;ce.side=ke,l=aa(se,ce);break;case"False":l=Je(re,e)}}}return l}(e,a,t,r,n,i,s)}}}}}}};var Pa=function(e){return function(a){return function(e,a){var t=a,r=t.game_map,n=Xe(e,r.bodies);switch(n.$){case"None":var i={$:"State"},s=t.next_id;i.next_id=s;var o=t.tick;i.tick=o;var c=t.players;i.players=c;var v=t.hero_states;i.hero_states=v;var u={$:"GameMap"},l=r.width;u.width=l;var d=r.height;u.height=d;var h=r.bodies;u.bodies=h;var f=r.bodies_count;u.bodies_count=f,i.game_map=u;break;case"Some":var b=n.value,$={$:"State"},_=t.next_id;$.next_id=_;var k=t.tick;$.tick=k;var p=t.players;$.players=p;var g=t.hero_states;$.hero_states=g;var m={$:"GameMap"},w=r.width;m.width=w;var x=r.height;m.height=x;var N=r.bodies;m.bodies=N;var M=r.bodies_count;m.bodies_count=M,$.game_map=m,i=function(e,a){var t=e,r=t.game_map,n=Xe(a,r.bodies);switch(n.$){case"None":var i={$:"State"},s=t.next_id;i.next_id=s;var o=t.tick;i.tick=o;var c=t.players;i.players=c;var v=t.hero_states;i.hero_states=v;var u={$:"GameMap"},l=r.width;u.width=l;var d=r.height;u.height=d;var h=r.bodies;u.bodies=h;var f=r.bodies_count;u.bodies_count=f,i.game_map=u;break;case"Some":var b=n.value,$=b.hitbox;switch($.$){case"Circle":var _=y($.radius,S($.radius,.015)),k=Math.round(_*Math.pow(10,2))/Math.pow(10,2),p=ma($.center,k),g={$:"State"},m=t.next_id;g.next_id=m;var w=t.tick;g.tick=w;var x=t.players;g.players=x;var N=t.hero_states;g.hero_states=N;var M={$:"GameMap"},B=r.width;M.width=B;var P=r.height;M.height=P;var F=r.bodies;M.bodies=F;var T=r.bodies_count;M.bodies_count=T,g.game_map=M;var C={$:"Body"},I=b.id;C.id=I;var U=p;C.hitbox=U;var E=b.tick;C.tick=E;var A=b.effects;C.effects=A;var L=b.collidable;C.collidable=L;var G=b.side;C.side=G,i=da(g,C);break;case"Polygon":i={$:"State"};var O=t.next_id;i.next_id=O;var R=t.tick;i.tick=R;var V=t.players;i.players=V;var Z=t.hero_states;i.hero_states=Z;var j={$:"GameMap"},q=r.width;j.width=q;var D=r.height;j.height=D;var K=r.bodies;j.bodies=K;var W=r.bodies_count;j.bodies_count=W,i.game_map=j}}return i}(ze(b,$),e)}return i}(e,a)}};var Fa=function(e){return function(a){return function(t){return function(n){return function(i){return function(e,a,t,n,i){var s=i,o=s.game_map,c=Z(0,s.players,e);switch(c.$){case"None":var v={$:"State"},u=s.next_id;v.next_id=u;var l=s.tick;v.tick=l;var d=s.players;v.players=d;var h=s.hero_states;v.hero_states=h;var f={$:"GameMap"},b=o.width;f.width=b;var $=o.height;f.height=$;var _=o.bodies;f.bodies=_;var y=o.bodies_count;f.bodies_count=y,v.game_map=f;break;case"Some":var k=c.value,p=k.hero,g=Xe(p.body_id,o.bodies);switch(g.$){case"None":v={$:"State"};var m=s.next_id;v.next_id=m;var w=s.tick;v.tick=w;var x=s.players;v.players=x;var N=s.hero_states;v.hero_states=N;var S={$:"GameMap"},M=o.width;S.width=M;var B=o.height;S.height=B;var P=o.bodies;S.bodies=P;var F=o.bodies_count;S.bodies_count=F,v.game_map=S;break;case"Some":var T=g.value,C={$:"Player"},I=k.id;C.id=I;var U=k.name;C.name=U;var E=k.keys;C.keys=E;var A=k.target;C.target=A;var L={$:"Hero"},G=p.owner_id;L.owner_id=G;var O=p.name;L.name=O;var R=p.skills;L.skills=R;var V=p.body_id;L.body_id=V,C.hero=L;var j=a,q=t,D=n,K={$:"State"},W=s.next_id;K.next_id=W;var H=s.tick;K.tick=H;var Q=s.players;K.players=Q;var z=s.hero_states;K.hero_states=z;var Y={$:"GameMap"},X=o.width;Y.width=X;var J=o.height;Y.height=J;var ee=o.bodies;Y.bodies=ee;var ae=o.bodies_count;Y.bodies_count=ae,K.game_map=Y,v=function(e,a,t,n,i,s){var o=e,c=Be(o.hitbox),v=_e(ye(oa(a,r("W")),c)),u=pe(Pe(c,De(v,40))),l=pe(Pe(c,De(v,t))),d=ma(u,n),h=ca(s),f=fa,b={$:"Body"},$=h.fst;b.id=$;var _=d;b.hitbox=_;var y=Pa(h.fst);b.tick=y,b.effects={$:"Nil"},b.collidable={$:"Untouchable"};var k=o.side;b.side=k;var p=f(b),g=Ba(h.fst)(1.9)(l)(t)(i)(ia(o.id)(h.fst)(135n)),m=Qe(p,h.snd);return Qe(g,m)}(T,C,j,q,D,K)}}return v}(e,a,t,n,i)}}}}},Ta=function(e){return function(a){return function(t){return function(r){return function(e,a,t,r){var n=r,i=n.game_map,s={$:"Pair"},o=Z(0,n.players,e);s.fst=o;var c=na(i.bodies,a);s.snd=c;var v=s.fst;switch(v.$){case"None":if("None"===s.snd.$){var u={$:"State"},l=n.next_id;u.next_id=l;var d=n.tick;u.tick=d;var h=n.players;u.players=h;var f=n.hero_states;u.hero_states=f;var b={$:"GameMap"},$=i.width;b.width=$;var _=i.height;b.height=_;var y=i.bodies;b.bodies=y;var k=i.bodies_count;b.bodies_count=k,u.game_map=b}else{u={$:"State"};var p=n.next_id;u.next_id=p;var g=n.tick;u.tick=g;var m=n.players;u.players=m;var w=n.hero_states;u.hero_states=w;var x={$:"GameMap"},S=i.width;x.width=S;var M=i.height;x.height=M;var B=i.bodies;x.bodies=B;var P=i.bodies_count;x.bodies_count=P,u.game_map=x}break;case"Some":var F=v.value;if("Player"===F.$){var T=s.snd;switch(T.$){case"None":u={$:"State"};var C=n.next_id;u.next_id=C;var I=n.tick;u.tick=I;var U=n.players;u.players=U;var E=n.hero_states;u.hero_states=E;var A={$:"GameMap"},L=i.width;A.width=L;var G=i.height;A.height=G;var O=i.bodies;A.bodies=O;var R=i.bodies_count;A.bodies_count=R,u.game_map=A;break;case"Some":var V=T.value,j=Be(V.hitbox),q=De(_e(ye(F.target,j)),N($e(ye(F.target,j)),t)),D=(Pe(j,q),Fe(V.hitbox,q)),K={$:"State"},W=n.next_id;K.next_id=W;var H=n.tick;K.tick=H;var Q=n.players;K.players=Q;var z=n.hero_states;K.hero_states=z;var Y={$:"GameMap"},X=i.width;Y.width=X;var J=i.height;Y.height=J;var ee=i.bodies;Y.bodies=ee;var ae=i.bodies_count;Y.bodies_count=ae,K.game_map=Y;var te={$:"Body"},re=V.id;te.id=re;var ne=D;te.hitbox=ne;var ie=V.tick;te.tick=ie;var se=V.effects;te.effects=se;var oe=V.collidable;te.collidable=oe;var ce=V.side;te.side=ce,u=da(K,te)}}else u=null(F)(s.snd);break;default:u=null(v)(s.snd)}return u}(e,a,t,r)}}}};function Ca(e,a,t,r){var n={$:"Body"},i=a;n.id=i;var s=ma(e,t);n.hitbox=s;var o=function(e){return function(a){return function(e,a){var t=a,r=t.game_map,n=Xe(e,r.bodies);switch(n.$){case"None":var i={$:"State"},s=t.next_id;i.next_id=s;var o=t.tick;i.tick=o;var c=t.players;i.players=c;var v=t.hero_states;i.hero_states=v;var u={$:"GameMap"},l=r.width;u.width=l;var d=r.height;u.height=d;var h=r.bodies;u.bodies=h;var f=r.bodies_count;u.bodies_count=f,i.game_map=u;break;case"Some":var b=n.value,$={$:"State"},_=t.next_id;$.next_id=_;var y=t.tick;$.tick=y;var k=t.players;$.players=k;var p=t.hero_states;$.hero_states=p;var g={$:"GameMap"},m=r.width;g.width=m;var w=r.height;g.height=w;var x=r.bodies;g.bodies=x;var N=r.bodies_count;g.bodies_count=N,$.game_map=g,i=ze(b,$)}return i}(e,a)}}(a);n.tick=o,n.effects={$:"Nil"},n.collidable={$:"Untouchable"};var c=r;return n.side=c,n}var Ia=function(e){return function(a){return function(t){return function(n){return function(i){return function(e,a,t,n,i){var s=i,o=s.game_map,c=Z(0,s.players,e);switch(c.$){case"None":var v={$:"State"},u=s.next_id;v.next_id=u;var l=s.tick;v.tick=l;var d=s.players;v.players=d;var h=s.hero_states;v.hero_states=h;var f={$:"GameMap"},b=o.width;f.width=b;var $=o.height;f.height=$;var _=o.bodies;f.bodies=_;var y=o.bodies_count;f.bodies_count=y,v.game_map=f;break;case"Some":var k=Z(0,o.bodies,e);switch(k.$){case"None":v={$:"State"};var p=s.next_id;v.next_id=p;var g=s.tick;v.tick=g;var m=s.players;v.players=m;var w=s.hero_states;v.hero_states=w;var x={$:"GameMap"},N=o.width;x.width=N;var S=o.height;x.height=S;var M=o.bodies;x.bodies=M;var B=o.bodies_count;x.bodies_count=B,v.game_map=x;break;case"Some":var P=k.value,F=oa(c.value,r("Z")),T={$:"State"},C=s.next_id;T.next_id=C;var I=s.tick;T.tick=I;var U=s.players;T.players=U;var E=s.hero_states;T.hero_states=E;var A={$:"GameMap"},L=o.width;A.width=L;var G=o.height;A.height=G;var O=o.bodies;A.bodies=O;var R=o.bodies_count;A.bodies_count=R,T.game_map=A;var V=ca(T),j=Ca(F,V.fst,t,P.side),q=fa(j),D=ba(a)(V.fst)(pa(e)(V.fst)({$:"V2",x:10,y:10})(n)),K=Qe(q,V.snd);v=Qe(D,K)}}return v}(e,a,t,n,i)}}}}};var Ua=O();var Ea=function(){var e={$:"State",next_id:20n,tick:0n},a=O();e.players=a;var t=O();e.hero_states=t;var r=function(e,a){var t={$:"GameMap"},r=e;t.width=r;var n=a;t.height=n;var i=Ua;return t.bodies=i,t.bodies_count=10000n,t}(1200n,1200n);return e.game_map=r,e}(),Aa=Ea,La=function(e){return function(a){return function(e,a){var t=e,r=t.snd;switch(v(BigInt.asUintN(64,0n===r)).$){case"True":var n=a;break;case"False":var i=X,s=ae,o=a,c={$:"Pair"},u=t.fst;c.fst=u;var l=t.snd,d=BigInt.asUintN(64,l-1n);c.snd=d,n=Q(i,null,s,o,c)}return n}(e,a)}};function Ga(e){var a=e,t={$:"HeroState"},r=K(X,null,a.cooldowns,null,a.cooldowns,La);t.cooldowns=r;var n=a.health;return t.health=n,t}var Oa=function(e){return function(a){return function(t){return function(e,a,t){var r=e,n=j(0,r.hero_states,a,Ga(t)),i={$:"State"},s=r.next_id;i.next_id=s;var o=r.tick;i.tick=o;var c=r.players;i.players=c;var v=n;i.hero_states=v;var u=r.game_map;return i.game_map=u,i}(e,a,t)}}};var Ra=function(e){return function(e){var a=e,t=a.game_map,r=q(Ze,t.bodies,t.bodies_count),n=r,i=Ve,s={$:"State"},o=a.next_id;s.next_id=o;var c=a.tick;s.tick=c;var v=a.players;s.players=v;var u=a.hero_states;s.hero_states=u;var l=a.game_map;s.game_map=l;var d=function(e,a,t,r,n){return C(e,a,t,r,n)}(null,n,i,s,(function(e){return function(a){return function(e){return e.tick}(e)(a)}})),h=ne(d.tick,1n),f={$:"State"},b=d.next_id;f.next_id=b;var $=h;f.tick=$;var _=d.players;f.players=_;var y=d.hero_states;f.hero_states=y;var k=d.game_map;return f.game_map=k,function(e){var a=e,t=a.game_map,r=a.hero_states,n=t.bodies_count,i={$:"State"},s=a.next_id;i.next_id=s;var o=a.tick;i.tick=o;var c=a.players;i.players=c;var v=a.hero_states;i.hero_states=v;var u={$:"GameMap"},l=t.width;u.width=l;var d=t.height;u.height=d;var h=t.bodies;u.bodies=h;var f=t.bodies_count;return u.bodies_count=f,i.game_map=u,V(0,0,r,n,i,Oa)}(f)}(e)};var Va=32;function Za(e,a){return function(e,a,t,r,n){for(;;){var i=a;switch(i.$){case"Cons":a=i.tail,r=n(r)(i.head);continue;case"Nil":var s=r}return s}}(0,e.effects,0,a,(function(e){return function(a){return a(e)}}))}function ja(e,a,t,r,n,i){var s={$:"Pair"},c=function(e,a){return W(X,Re,ae,e)(a)}(t,e);s.fst=c;var v=function(e,a){var t=W(X,null,ae,a)(e);switch(t.$){case"None":var r={$:"False"};break;case"Some":r=t.value.fst}return r}(e,r);s.snd=v;var u=s.fst;switch(u.$){case"None":switch(s.snd.$){case"False":var l=i;break;case"True":l=i}break;case"Some":switch(s.snd.$){case"False":l=i;break;case"True":switch(o(function(e,a){var t=W(X,null,ae,a)(e);switch(t.$){case"None":var r={$:"True"};break;case"Some":r=de(t.value,0n)}return r}(e,n))({$:"True"}).$){case"True":l=i;break;case"False":var d=Za(u.value,i),h=u.value;l=function(e,a,t,r,n){var i=e;switch(i.$){case"None":var s=a;break;case"Some":var o=i.value,c=X,v=ae,u=o.cooldowns,l={$:"Pair"},d=r;l.fst=d;var h=n;l.snd=h;var f=Q(c,null,v,u,l),b=a,$=b.hero_states,_=t,y={$:"HeroState"},k=f;y.cooldowns=k;var p=o.health;y.health=p;var g=j(0,$,_,y),m=(s={$:"State"},b.next_id);s.next_id=m;var w=b.tick;s.tick=w;var x=b.players;s.players=x;var N=g;s.hero_states=N;var S=b.game_map;s.game_map=S}return s}(Z(0,d.hero_states,a),d,a,e,h.cooldown)}}}return l}var qa=function(e){return function(a){return function(e,a){var t=a,n=t.game_map,i=Z(0,t.players,e);switch(i.$){case"None":var s={$:"State"},o=t.next_id;s.next_id=o;var c=t.tick;s.tick=c;var v=t.players;s.players=v;var u=t.hero_states;s.hero_states=u;var l={$:"GameMap"},d=n.width;l.width=d;var h=n.height;l.height=h;var f=n.bodies;l.bodies=f;var b=n.bodies_count;l.bodies_count=b,s.game_map=l;break;case"Some":var $=i.value,_=$.hero,y=Z(0,t.hero_states,e);switch(y.$){case"None":s={$:"State"};var k=t.next_id;s.next_id=k;var p=t.tick;s.tick=p;var g=t.players;s.players=g;var m=t.hero_states;s.hero_states=m;var w={$:"GameMap"},x=n.width;w.width=x;var N=n.height;w.height=N;var S=n.bodies;w.bodies=S;var M=n.bodies_count;w.bodies_count=M,s.game_map=w;break;case"Some":var B=y.value,P=Z(0,n.bodies,_.body_id),F={$:"State"},T=t.next_id;F.next_id=T;var C=t.tick;F.tick=C;var I=t.players;F.players=I;var U=t.hero_states;F.hero_states=U;var E={$:"GameMap"},A=n.width;E.width=A;var L=n.height;E.height=L;var G=n.bodies;E.bodies=G;var O=n.bodies_count;E.bodies_count=O,F.game_map=E;var V=function(e,a){var t=e;switch(t.$){case"None":var r=a;break;case"Some":r=ze(t.value,a)}return r}(P,F),j=function(e,a,t,r,n,i){for(;;){var s=e;switch(s.$){case"Cons":var o=ja(s.head,a,t,r,n,i);e=s.tail,i=o;continue;case"Nil":var c=i}return c}}(z(X,Re,_.skills),e,_.skills,$.keys,B.cooldowns,V),q=W(X,Re,ae,_.skills)(r("RightClick"));switch(q.$){case"None":s=j;break;case"Some":var D=W(X,null,ae,B.cooldowns)(r("RightClick"));switch(D.$){case"None":s=j;break;case"Some":s=function(e,a,t){switch(R(a,0n).$){case"True":var r=Za(e,t);break;case"False":r=t}return r}(q.value,D.value,j)}}}}return s}(e,a)}};function Da(e,a,t){var r=X,n=Re,i=ae,s=e,o={$:"Pair"},c=a;o.fst=c;var v=t;return o.snd=v,Q(r,n,i,s,o)}var Ka=S(.5,Va);function Wa(e){var a=le(e,re);return le(a,2n)}function Ha(e,a,t){var r=X,n=ae,i=e,s={$:"Pair"},o=a;s.fst=o;var c=t;return s.snd=c,Q(r,null,n,i,s)}function Qa(e,a,t){var n=e,i=Da({$:"Leaf"},r("RightClick"),function(e,a,t){var n={$:"Skill"},i=r("move");n.name=i;var s={$:"Cons"},o=Ma(e)(a);s.head=o,s.tail={$:"Nil"},n.effects=s;var c=t;return n.cooldown=c,n}(a,t,0n)),s=Da(i,r("E"),function(e,a,t,n){var i={$:"Skill"},s=r("teleport");i.name=s;var o={$:"Cons"},c=Ta(e)(a)(t);o.head=c,o.tail={$:"Nil"},i.effects=o;var v=n;return i.cooldown=v,i}(a,t,S(Ka,4),Wa(3n))),o=Da(s,r("Z"),function(e,a,t,n,i){var s={$:"Skill"},o=r("wave_of_force");s.name=o;var c={$:"Cons"},v=Ia(e)(a)(t)(n);c.head=v,c.tail={$:"Nil"},s.effects=c;var u=i;return s.cooldown=u,s}(a,100n,S(2,Va),160n,Wa(10n))),c=Da(o,r("W"),function(e,a,t,n,i){var s={$:"Skill"},o=r("shoot");s.name=o;var c={$:"Cons"},v=Fa(e)(a)(t)(n);c.head=v,c.tail={$:"Nil"},s.effects=c;var u=i;return s.cooldown=u,s}(a,S(Ka,19),S(.25,Va),10000n,Wa(3n))),v=r("Q"),u=a,l=S(Ka,12),d=S(.5,.475),h=Da(c,v,function(e,a,t,n,i){var s={$:"Skill"},o=r("magic_missiles");s.name=o;var c={$:"Cons"},v=Sa(e)(a)(t)(n);c.head=v,c.tail={$:"Nil"},s.effects=c;var u=i;return s.cooldown=u,s}(u,l,10000n,S(d,Va),Wa(3n))),f=Da(h,r("R"),function(e,a,t,n,i,s){var o={$:"Skill"},c=r("disintegrate");o.name=c;var v={$:"Cons"},u=_a(e)(a)(t)(n)(i);v.head=u,v.tail={$:"Nil"},o.effects=v;var l=s;return o.cooldown=l,o}(a,Wa(5n),10,S(Ka,16),.1,Wa(10n))),b=Ha({$:"Leaf"},r("RightClick"),0n),$=Ha(b,r("R"),0n),_=Ha($,r("E"),0n),y=Ha(_,r("Z"),0n),k=Ha(y,r("W"),0n),p=Ha(k,r("Q"),0n),g=n.hero_states,m=a,w={$:"HeroState"},x=p;w.cooldowns=x,w.health=1270n;var N=j(0,g,m,w),M={$:"Pair"},B=f;M.fst=B;var P={$:"State"},F=n.next_id;P.next_id=F;var T=n.tick;P.tick=T;var C=n.players;P.players=C;var I=N;P.hero_states=I;var U=n.game_map;return P.game_map=U,M.snd=P,M}function za(e,a,t){var n={$:"V2",x:0,y:0};return function(e,a,t,n){var i=r("Li-Ming"),s=ma(n,S(.625,Va)),o=e,c={$:"Body"},v=a;c.id=v;var u=s;c.hitbox=u;var l=qa(a);c.tick=l,c.effects={$:"Nil"},c.collidable={$:"TakesEffects"};var d=t;c.side=d;var h=Qa(da(o,c),a,a),f={$:"Pair"},b={$:"Hero"},$=a;b.owner_id=$;var _=i;b.name=_;var y=h.fst;b.skills=y;var k=a;b.body_id=k,f.fst=b;var p=h.snd;return f.snd=p,f}(e,a,t,n)}var Ya={$:"Leaf"};function Xa(e,a,t){var n=t,i=Z(0,n.players,e);switch(i.$){case"None":var s=e,o=function(e){var a=e;if("ActionEvent"===a.$){var t=a.action;if("SetNick"===t.$)var n=t.nick;else n=null(t)}else n=r("Anon");return n}(a),c=function(e){var a=e;if("ActionEvent"===a.$){var t=a.action;if("SetNick"===t.$)var r=t.side;else r=null(t)}else r={$:"Neutral"};return r}(a),v={$:"State"},u=n.next_id;v.next_id=u;var l=n.tick;v.tick=l;var d=n.players;v.players=d;var h=n.hero_states;v.hero_states=h;var f=n.game_map;v.game_map=f;var b=function(e,a,t,r){var n=za(r,e,t),i={$:"Pair"},s={$:"Player"},o=e;s.id=o;var c=a;s.name=c;var v=Ya;s.keys=v;var u={$:"V2",x:0,y:0};s.target=u;var l=n.fst;s.hero=l,i.fst=s;var d=n.snd;return i.snd=d,i}(s,o,c,v),$=b.snd,_=j(0,$.players,e,b.fst),y={$:"State"},k=$.next_id;y.next_id=k;var p=$.tick;y.tick=p;var g=_;y.players=g;var m=$.hero_states;y.hero_states=m;var w=$.game_map;y.game_map=w;break;case"Some":i.value,y={$:"State"};var x=n.next_id;y.next_id=x;var N=n.tick;y.tick=N;var S=n.players;y.players=S;var M=n.hero_states;y.hero_states=M;var B=n.game_map;y.game_map=B}return y}function Ja(e,a,t,r,n,i){var s=e;switch(s.$){case"None":var o=i;break;case"Some":var c=s.value,v=X,u=ae,l=c.keys,d={$:"Pair"},h=a;d.fst=h;var f={$:"Pair"},b=t;f.fst=b;var $=n;f.snd=$,d.snd=f;var _=Q(v,null,u,l,d),y=i,k=r,p={$:"Player"},g=c.id;p.id=g;var m=c.name;p.name=m;var w=_;p.keys=w;var x=c.target;p.target=x;var N=c.hero;p.hero=N,o=j(0,y,k,p)}return o}function et(e,a,t,r,n){var i=e;switch(i.$){case"None":var s=n;break;case"Some":var o=i.value,c=n,v=r,u={$:"Player"},l=o.id;u.id=l;var d=o.name;u.name=d;var h=o.keys;u.keys=h;var f={$:"V2"},b=a;f.x=b;var $=t;f.y=$,u.target=f;var _=o.hero;u.hero=_,s=j(0,c,v,u)}return s}function at(e){var a=e;switch(a.$){case"ActionEvent":var t=a.action,r=function(e){var a=e,r=function(e,a,t,r){var n=e;switch(n.$){case"None":var i=r;break;case"Some":var s=n.value,o=r,c=t,v={$:"Player"},u=s.id;v.id=u;var l=a;v.name=l;var d=s.keys;v.keys=d;var h=s.target;v.target=h;var f=s.hero;v.hero=f,i=j(0,o,c,v)}return i}(Z(0,a.players,t.pid),t.nick,t.pid,a.players),n=Z(0,a.game_map.bodies,t.pid);switch(n.$){case"None":var i={$:"State"},s=a.next_id;i.next_id=s;var o=a.tick;i.tick=o;var c=r;i.players=c;var v=a.hero_states;i.hero_states=v;var u=a.game_map;i.game_map=u;break;case"Some":var l=n.value,d={$:"State"},h=a.next_id;d.next_id=h;var f=a.tick;d.tick=f;var b=r;d.players=b;var $=a.hero_states;d.hero_states=$;var _=a.game_map;d.game_map=_;var y={$:"Body"},k=l.id;y.id=k;var p=l.hitbox;y.hitbox=p;var g=l.tick;y.tick=g;var m=l.effects;y.effects=m;var w=l.collidable;y.collidable=w;var x=t.side;y.side=x,i=aa(d,y)}return i};break;case"KeyEvent":r=function(e){var t=e,r=Z(0,t.players,a.pid),n=function(e){var a=e;switch(a.$){case"None":(t={$:"V2"}).x=0,t.y=0;break;case"Some":var t=a.value.snd}return t}(function(e,a){var t=a;switch(t.$){case"None":var r={$:"None"};break;case"Some":var n=t.value;r=W(X,null,ae,n.keys)(e)}return r}(a.key,r)),i=Ja(r,a.key,a.pressed,a.pid,n,t.players),s={$:"State"},o=t.next_id;s.next_id=o;var c=t.tick;s.tick=c;var v=i;s.players=v;var u=t.hero_states;s.hero_states=u;var l=t.game_map;return s.game_map=l,s};break;case"KeyMouse":r=function(e){var t=e,r=Z(0,t.players,a.pid),n=a.key,i=a.pressed,s=a.pid,o={$:"V2"},c=a.x;o.x=c;var v=a.y;o.y=v;var u=Ja(r,n,i,s,pe(o),t.players),l={$:"State"},d=t.next_id;l.next_id=d;var h=t.tick;l.tick=h;var f=u;l.players=f;var b=t.hero_states;l.hero_states=b;var $=t.game_map;return l.game_map=$,l};break;case"MouseClick":switch(a.click.$){case"LeftButton":r=function(e){var t=e,r=Z(0,t.players,a.pid),n=a.x,i=Math.round(n*Math.pow(10,2))/Math.pow(10,2),s=a.y,o=et(r,i,Math.round(s*Math.pow(10,2))/Math.pow(10,2),a.pid,t.players),c={$:"State"},v=t.next_id;c.next_id=v;var u=t.tick;c.tick=u;var l=o;c.players=l;var d=t.hero_states;c.hero_states=d;var h=t.game_map;return c.game_map=h,c};break;case"RightButton":r=function(e){var t=e,r=Z(0,t.players,a.pid),n=a.x,i=Math.round(n*Math.pow(10,2))/Math.pow(10,2),s=a.y,o=et(r,i,Math.round(s*Math.pow(10,2))/Math.pow(10,2),a.pid,t.players),c={$:"State"},v=t.next_id;c.next_id=v;var u=t.tick;c.tick=u;var l=o;c.players=l;var d=t.hero_states;c.hero_states=d;var h=t.game_map;return c.game_map=h,c}}break;case"MouseMove":r=function(e){var a=e,t={$:"State"},r=a.next_id;t.next_id=r;var n=a.tick;t.tick=n;var i=a.players;t.players=i;var s=a.hero_states;t.hero_states=s;var o=a.game_map;return t.game_map=o,t}}return r}var tt=function(e){return function(a){return function(e,a){var t=Xa(function(e){var a=e;switch(a.$){case"ActionEvent":var t=a.action.pid;break;case"KeyEvent":case"KeyMouse":case"MouseClick":case"MouseMove":t=a.pid}return t}(e),e,a);return at(e)(t)}(e,a)}};function rt(e,a,t){var r=n(0,a,fe(t));switch(r.$){case"None":var i={$:"Nil"};break;case"Some":i=r.value}return i}function nt(e,a,t){return t.tick}function it(e,a,t){return t.when}function st(e,a,t){return t.action_logs}function ot(e,a){return a.life}function ct(e,a){return a.older}function vt(e,a,t){var r=t,n={$:"StateNode"},i=r.tick;n.tick=i;var s=a;n.keep=s;var o=r.life;n.life=o;var c=r.state;n.state=c;var v=r.older;return n.older=v,n}function ut(e,a){return a.state}function lt(e,a){return a.tick}function dt(e,a,t){return function(e,a,t,r){for(;;){var n=t;switch(n.$){case"None":var i=r;break;case"Some":var s=n.value;switch(ve(a,s.tick).$){case"True":t=s.older,r=ne(1n,r);continue;case"False":i=r}}return i}}(0,a,t,0n)}function ht(e,a,t,r,n){if(0n===n){var i={$:"Some"},s=vt(0,1n,t);i.value=s}else i=function(e,a,t,r,n){var i=n;if(0n===i){var s=vt(0,0n,t),o={$:"Some"},c={$:"StateNode"},v=r;c.tick=v,c.keep=0n;var u=ot(0,t);c.life=u;var l=a;c.state=l;var d={$:"Some"},h=s;d.value=h,c.older=d,o.value=c}else{var f=i,b=(s=vt(0,0n,function(e,a,t){var r=t,n={$:"StateNode"},i=r.tick;n.tick=i;var s=r.keep;n.keep=s;var o=a;n.life=o;var c=r.state;n.state=c;var v=r.older;return n.older=v,n}(0,BigInt.asUintN(64,f-1n),t)),o={$:"Some"},{$:"StateNode"}),$=r;b.tick=$,b.keep=0n,b.life=0n;var _=a;b.state=_;var y={$:"Some"},k=s;y.value=k,b.older=y,o.value=b}return o}(0,a,t,r,ot(0,t));return i}function ft(e,a,t){switch(R(a,0n).$){case"True":var r=t;break;case"False":switch(t.$){case"None":r={$:"None"};break;case"Some":var n=function(e,a,t,r,n){for(;;){switch(v(se(ve(t,a))).$){case"True":(o={$:"Pair"}).fst=r;var i=n;o.snd=i;break;case"False":var s=r;switch(s.$){case"None":var o;(o={$:"Pair"}).fst={$:"None"};var c=n;o.snd=c;break;case"Some":var u=n,l=ne(ot(0,s.value),1n),d=ne(u,l),h=ct(0,s.value);a=ne(a,1n),r=h,n=d;continue}}return o}}(0,0n,a,t,0n),i=n.fst;switch(i.$){case"None":r={$:"None"};break;case"Some":var s=lt(0,i.value),o=ne(ot(0,i.value),n.snd),c=ut(0,i.value),u=ct(0,i.value),l=(r={$:"Some"},{$:"StateNode"}),d=s;l.tick=d,l.keep=0n;var h=o;l.life=h;var f=c;l.state=f;var b=u;l.older=b,r.value=l}}}return r}function bt(e,a,t,r){return ie(le(r,t.ticks_per_second),1000n)}var $t=function(e){return function(e){return function(a){return function(e,a,t){var r={$:"TimedAction"},n=t;r.action=n;var i=a;return r.time=i,r}(0,e,a)}}};function _t(e,a,t,r,s){var o=t,c=function(e,a,t,r){var s=n(0,a,fe(t));switch(s.$){case"None":var o=a,c=fe(t),v={$:"Cons"},u=r;v.head=u,v.tail={$:"Nil"};var l=i(null,o,c,v);break;case"Some":var d=a,h=fe(t),f=e,b=s.value,$={$:"Cons"},_=r;$.head=_,$.tail={$:"Nil"},l=i(null,d,h,T(f,b,$))}return l}(a,o.action_logs,r,s),v={$:"Mach"},u=o.ticks_per_second;v.ticks_per_second=u;var l=o.genesis_tick;v.genesis_tick=l;var d=o.cached_tick;v.cached_tick=d;var h=o.state_logs;v.state_logs=h;var f=c;v.action_logs=f;var b=o.action_eq;return v.action_eq=b,v}function yt(e,a,t,r,n){var i=t,s=function(e,a){var t=e,r=a;switch(v(BigInt.asUintN(64,t>=r)).$){case"True":var n=e;break;case"False":n=a}return n}(i.cached_tick,r),o=function(e,a,t,r){var n=t;switch(n.$){case"None":var i={$:"Some"},s={$:"StateNode"},o=r;s.tick=o,s.keep=0n,s.life=0n;var c=a;s.state=c,s.older={$:"None"},i.value=s;break;case"Some":var v=function(e,a){return a.keep}(0,n.value);i=ht(0,a,n.value,r,v)}return i}(0,n,i.state_logs,r),c={$:"Mach"},u=i.ticks_per_second;c.ticks_per_second=u;var l=i.genesis_tick;c.genesis_tick=l;var d=s;c.cached_tick=d;var h=o;c.state_logs=h;var f=i.action_logs;c.action_logs=f;var b=i.action_eq;return c.action_eq=b,c}function kt(e,a,t,r){var n=t,i=function(e,a){var t=e,r=a;switch(v(BigInt.asUintN(64,t<=r)).$){case"True":var n=e;break;case"False":n=a}return n}(r,n.genesis_tick),s={$:"Mach"},o=n.ticks_per_second;s.ticks_per_second=o;var c=i;s.genesis_tick=c;var u=n.cached_tick;s.cached_tick=u;var l=n.state_logs;s.state_logs=l;var d=n.action_logs;s.action_logs=d;var h=n.action_eq;return s.action_eq=h,s}var pt=function(){var e={$:"Game"},a=Aa;e.init=a;var t=tt;e.when=t;var r=Ra;return e.tick=r,e}(),gt=pt;function mt(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===e.length)return{value:null,bytesRead:0};switch(e[a]){case Number(P):return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e[a]!==Number(P))return{value:null,bytesRead:0};a+=1;var t=BigInt(new DataView(e.buffer,a).getBigUint64(0,!0));a+=8;var r=BigInt(new DataView(e.buffer,a).getBigUint64(0,!0));return a+=8,{value:{$:"KeyEvent",time:t,pid:r,key:{$:"Cons",head:BigInt(e[a]),tail:{$:"Nil"}},pressed:0!==e[a+=1]?{$:"True"}:{$:"False"}},bytesRead:a+=1}}(e,a);case Number(L):return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e[a]!==Number(L))return{value:null,bytesRead:0};a+=1;var t=BigInt(new DataView(e.buffer,a).getBigUint64(0,!0));a+=8;var r=BigInt(new DataView(e.buffer,a).getBigUint64(0,!0)),n=function(e){return{value:0===e[arguments.length>1&&void 0!==arguments[1]?arguments[1]:0]?{$:"LeftButton"}:{$:"RightButton"},bytesRead:1}}(e,a+=8),i=wt(e,a+=n.bytesRead),s=wt(e,a+=i.bytesRead);return a+=s.bytesRead,{value:{$:"MouseClick",time:t,pid:r,click:n.value,x:i.value,y:s.value},bytesRead:a}}(e,a);case Number(F):return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e[a]!==Number(F))return{value:null,bytesRead:0};a+=1;var t=BigInt(new DataView(e.buffer,a).getBigUint64(0,!0));a+=8;var r=BigInt(new DataView(e.buffer,a).getBigUint64(0,!0));a+=8;var n=BigInt(e[a]),i=0!==e[a+=1],s=wt(e,a+=1),o=wt(e,a+=s.bytesRead);return a+=o.bytesRead,{value:{$:"KeyMouse",time:t,pid:r,key:{$:"Cons",head:n,tail:{$:"Nil"}},pressed:i?{$:"True"}:{$:"False"},x:s.value,y:o.value},bytesRead:a}}(e,a);case Number(G):return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e[a]!==Number(G))return{value:null,bytesRead:0};a+=1;var t=BigInt(new DataView(e.buffer,a).getBigUint64(0,!0));a+=8;var r=BigInt(new DataView(e.buffer,a).getBigUint64(0,!0)),n=wt(e,a+=8),i=wt(e,a+=n.bytesRead);return a+=i.bytesRead,{value:{$:"MouseMove",time:t,pid:r,x:n.value,y:i.value},bytesRead:a}}(e,a);case Number(Y):return function(e){var a=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[a]===Number(Y)?function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e[a]!==Number(Y))return{value:null,bytesRead:0};a+=1;var t=BigInt(new DataView(e.buffer,a).getBigUint64(0,!0));a+=8;var r=BigInt(new DataView(e.buffer,a).getBigUint64(0,!0)),n=function(e){var a;switch(e[arguments.length>1&&void 0!==arguments[1]?arguments[1]:0]){case 0:a="Red";break;case 1:a="Blue";break;default:a="Neutral"}return{value:{$:a},bytesRead:1}}(e,a+=8),i=function(e){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[];a<e.length;)t.push(e[a]),a++;for(var r={$:"Nil"},n=t.length-1;n>=0;n--)r={$:"Cons",head:BigInt(t[n]),tail:r};return{value:r,bytesRead:t.length}}(e,a+=1);return a+=i.bytesRead,{value:{$:"SetNick",time:t,pid:r,side:n.value,nick:i.value},bytesRead:a}}(e,a):{value:null,bytesRead:0}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);return null===a.value?{value:null,bytesRead:0}:{value:{$:"ActionEvent",action:a.value},bytesRead:a.bytesRead}}(e,a);default:return{value:null,bytesRead:0}}}function wt(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{value:new DataView(e instanceof ArrayBuffer?e:e.buffer).getFloat64(a,!0),bytesRead:8}}function xt(e){return function(e){if(Array.isArray(e))return Nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(e){if("string"==typeof e)return Nt(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Nt(e,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=Array(a);t<a;t++)r[t]=e[t];return r}function St(e){switch(e.$){case"KeyEvent":return function(e){if("KeyEvent"!=e.$)return new Uint8Array;var a=[],t=e.time,r=e.pid,n="False"==e.pressed.$?0:1,i=e.key.head;return a.push(Number(P)),a.push.apply(a,xt(new Uint8Array(new BigUint64Array([BigInt(t)]).buffer).slice(0,8))),a.push.apply(a,xt(new Uint8Array(new BigUint64Array([BigInt(r)]).buffer).slice(0,8))),a.push(Number(i)),a.push(Number(n)),new Uint8Array(a)}(e);case"KeyMouse":return function(e){if("KeyMouse"!=e.$)return new Uint8Array;var a=[],t=e.time,r=e.pid,n=e.key.head,i="False"==e.pressed.$?0:1,s=e.x,o=e.y;return a.push(Number(F)),a.push.apply(a,xt(new Uint8Array(new BigUint64Array([BigInt(t)]).buffer).slice(0,8))),a.push.apply(a,xt(new Uint8Array(new BigUint64Array([BigInt(r)]).buffer).slice(0,8))),a.push(Number(n)),a.push(i),a.push.apply(a,xt(Mt(s))),a.push.apply(a,xt(Mt(o))),new Uint8Array(a)}(e);case"MouseClick":return function(e){if("MouseClick"!=e.$)return new Uint8Array;var a,t=[],r=e.time,n=e.pid,i=(a="LeftButton"==e.click.$?0:1,new Uint8Array([a])),s=e.x,o=e.y;return t.push(Number(L)),t.push.apply(t,xt(new Uint8Array(new BigUint64Array([BigInt(r)]).buffer).slice(0,8))),t.push.apply(t,xt(new Uint8Array(new BigUint64Array([BigInt(n)]).buffer).slice(0,8))),t.push(Number(i)),t.push.apply(t,xt(Mt(s))),t.push.apply(t,xt(Mt(o))),new Uint8Array(t)}(e);case"MouseMove":return function(e){if("MouseMove"!=e.$)return new Uint8Array;var a=[],t=e.time,r=e.pid,n=e.x,i=e.y;return a.push(Number(G)),a.push.apply(a,xt(new Uint8Array(new BigUint64Array([BigInt(t)]).buffer).slice(0,8))),a.push.apply(a,xt(new Uint8Array(new BigUint64Array([BigInt(r)]).buffer).slice(0,8))),a.push.apply(a,xt(Mt(n))),a.push.apply(a,xt(Mt(i))),new Uint8Array(a)}(e);case"ActionEvent":return function(e){return"ActionEvent"!=e.$?new Uint8Array:"SetNick"===(a=e.action).$?function(e){var a,t,r=[],n=e.time,i=e.pid,s=(a=e.nick,t=[],function e(a){"Nil"!==a.$&&"Cons"===a.$&&(t.push(Number(a.head)),e(a.tail))}(a),new Uint8Array(t)),o=e.side;return r.push(Number(Y)),r.push.apply(r,xt(new Uint8Array(new BigUint64Array([BigInt(n)]).buffer).slice(0,8))),r.push.apply(r,xt(new Uint8Array(new BigUint64Array([BigInt(i)]).buffer).slice(0,8))),r.push(function(e){var a;switch(e.$){case"Red":a=0;break;case"Blue":a=1;break;default:a=2}return new Uint8Array([a])}(o)),r.push.apply(r,xt(s)),new Uint8Array(r)}(a):new Uint8Array;var a}(e)}}function Mt(e){var a=new Float64Array(1);return a[0]=e,new Uint8Array(a.buffer)}function Bt(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,n,i,s,o=[],c=!0,v=!1;try{if(i=(t=t.call(e)).next,0===a){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=i.call(t)).done)&&(o.push(r.value),o.length!==a);c=!0);}catch(e){v=!0,n=e}finally{try{if(!c&&null!=t.return&&(s=t.return(),Object(s)!==s))return}finally{if(v)throw n}}return o}}(e,a)||Ft(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,a){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Ft(e))||a&&e&&"number"==typeof e.length){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(o)throw i}}}}function Ft(e,a){if(e){if("string"==typeof e)return Tt(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Tt(e,a):void 0}}function Tt(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=Array(a);t<a;t++)r[t]=e[t];return r}function Ct(e,a,t){var r,n=null===(r=t.game_map.bodies.get(e))||void 0===r||null===(r=r.value)||void 0===r?void 0:r.hitbox;if(n){var i=n.center,s=a.health,o={x:i.x-15,y:i.y+40},c=document.getElementById("canvas").getContext("2d");c&&function(e,a,t,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"black";e.font="".concat(n,"px Arial"),e.fillStyle=i,e.fillText(a.toString(),t,r)}(c,s,o.x,o.y)}}var It=150;function Ut(e,a,t,r,n,i,s){if((0===e.button||2===e.button)&&e.target instanceof HTMLCanvasElement){var o=a.time()+It,c=0===e.button?{$:"LeftButton"}:{$:"RightButton"},v=Number((e.clientX-e.target.offsetLeft).toFixed(2)),u=Number((e.clientY-e.target.offsetTop).toFixed(2)),l={$:"MouseClick",time:BigInt(o),pid:t,click:c,x:v,y:u};a.send(r,St(l));var d=s(BigInt(o))(l);return i(n)(d)}return n}var Et={},At=0,Lt=0;function Gt(e,a,t,r){e.target instanceof HTMLCanvasElement&&(At=e.clientX-e.target.offsetLeft,Lt=e.clientY-e.target.offsetTop)}function Ot(e,a,t,r,n,i,s){var o=a.time()+It,c="keydown"===e.type,v=BigInt(e.key.toUpperCase().charCodeAt(0));if(Et[v]!==c){Et[v]=c;var u={$:"KeyMouse",time:BigInt(o),pid:t,key:{$:"Cons",head:v,tail:{$:"Nil"}},pressed:1==c?{$:"True"}:{$:"False"},x:Number(At.toFixed(2)),y:Number(Lt.toFixed(2))};a.send(r,St(u));var l=s(BigInt(o))(u);return i(n)(l)}return n}function Rt(e){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(e)}function Vt(){Vt=function(){return a};var e,a={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,a,t){e[a]=t.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function v(e,a,t){return Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[a]}try{v({},"")}catch(e){v=function(e,a,t){return e[a]=t}}function u(e,a,t,r){var i=a&&a.prototype instanceof _?a:_,s=Object.create(i.prototype),o=new F(r||[]);return n(s,"_invoke",{value:S(e,t,o)}),s}function l(e,a,t){try{return{type:"normal",arg:e.call(a,t)}}catch(e){return{type:"throw",arg:e}}}a.wrap=u;var d="suspendedStart",h="suspendedYield",f="executing",b="completed",$={};function _(){}function y(){}function k(){}var p={};v(p,s,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(T([])));m&&m!==t&&r.call(m,s)&&(p=m);var w=k.prototype=_.prototype=Object.create(p);function x(e){["next","throw","return"].forEach((function(a){v(e,a,(function(e){return this._invoke(a,e)}))}))}function N(e,a){function t(n,i,s,o){var c=l(e[n],e,i);if("throw"!==c.type){var v=c.arg,u=v.value;return u&&"object"==Rt(u)&&r.call(u,"__await")?a.resolve(u.__await).then((function(e){t("next",e,s,o)}),(function(e){t("throw",e,s,o)})):a.resolve(u).then((function(e){v.value=e,s(v)}),(function(e){return t("throw",e,s,o)}))}o(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new a((function(a,n){t(e,r,a,n)}))}return i=i?i.then(n,n):n()}})}function S(a,t,r){var n=d;return function(i,s){if(n===f)throw Error("Generator is already running");if(n===b){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var o=r.delegate;if(o){var c=M(o,r);if(c){if(c===$)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var v=l(a,t,r);if("normal"===v.type){if(n=r.done?b:h,v.arg===$)continue;return{value:v.arg,done:r.done}}"throw"===v.type&&(n=b,r.method="throw",r.arg=v.arg)}}}function M(a,t){var r=t.method,n=a.iterator[r];if(n===e)return t.delegate=null,"throw"===r&&a.iterator.return&&(t.method="return",t.arg=e,M(a,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),$;var i=l(n,a.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,$;var s=i.arg;return s?s.done?(t[a.resultName]=s.value,t.next=a.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,$):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,$)}function B(e){var a={tryLoc:e[0]};1 in e&&(a.catchLoc=e[1]),2 in e&&(a.finallyLoc=e[2],a.afterLoc=e[3]),this.tryEntries.push(a)}function P(e){var a=e.completion||{};a.type="normal",delete a.arg,e.completion=a}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function T(a){if(a||""===a){var t=a[s];if(t)return t.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var n=-1,i=function t(){for(;++n<a.length;)if(r.call(a,n))return t.value=a[n],t.done=!1,t;return t.value=e,t.done=!0,t};return i.next=i}}throw new TypeError(Rt(a)+" is not iterable")}return y.prototype=k,n(w,"constructor",{value:k,configurable:!0}),n(k,"constructor",{value:y,configurable:!0}),y.displayName=v(k,c,"GeneratorFunction"),a.isGeneratorFunction=function(e){var a="function"==typeof e&&e.constructor;return!!a&&(a===y||"GeneratorFunction"===(a.displayName||a.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,v(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},a.awrap=function(e){return{__await:e}},x(N.prototype),v(N.prototype,o,(function(){return this})),a.AsyncIterator=N,a.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var s=new N(u(e,t,r,n),i);return a.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(w),v(w,c,"Generator"),v(w,s,(function(){return this})),v(w,"toString",(function(){return"[object Generator]"})),a.keys=function(e){var a=Object(e),t=[];for(var r in a)t.push(r);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in a)return e.value=r,e.done=!1,e}return e.done=!0,e}},a.values=T,F.prototype={constructor:F,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!a)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var t=this;function n(r,n){return o.type="throw",o.arg=a,t.next=r,n&&(t.method="next",t.arg=e),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),v=r.call(s,"finallyLoc");if(c&&v){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!v)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,a){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=a&&a<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=a,i?(this.method="next",this.next=i.finallyLoc,$):this.complete(s)},complete:function(e,a){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&a&&(this.next=a),$},finish:function(e){for(var a=this.tryEntries.length-1;a>=0;--a){var t=this.tryEntries[a];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),P(t),$}},catch:function(e){for(var a=this.tryEntries.length-1;a>=0;--a){var t=this.tryEntries[a];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var n=r.arg;P(t)}return n}}throw Error("illegal catch attempt")},delegateYield:function(a,t,r){return this.delegate={iterator:T(a),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=e),$}},a}function Zt(e,a,t,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void t(e)}o.done?a(c):Promise.resolve(c).then(r,n)}function jt(e){return function(){var a=this,t=arguments;return new Promise((function(r,n){var i=e.apply(a,t);function s(e){Zt(i,r,n,s,o,"next",e)}function o(e){Zt(i,r,n,s,o,"throw",e)}s(void 0)}))}}var qt=new class{constructor(){this.rooms=new Map,this.server_time_offset=0,this.best_ping=1/0,this.last_ping_time=0}init(e){return new Promise(((t,r)=>{this.ws=new a(e),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{this.sync_time(),t()},this.ws.onerror=e=>r(e),this.ws.onmessage=e=>{const a=e.data;this.handle_message(new Uint8Array(a instanceof ArrayBuffer?a:new ArrayBuffer(0)))}}))}send(e,a){const t=new Uint8Array(7+a.length);t[0]=2,this.write_uint48_be(t,1,e),t.set(a,7),this.ws.send(t)}recv(e,a){return this.rooms.has(e)||(this.rooms.set(e,new Set),this.join_room(e)),this.rooms.get(e).add(a),()=>{this.rooms.get(e).delete(a),0===this.rooms.get(e).size&&(this.rooms.delete(e),this.exit_room(e))}}time(){return Date.now()+this.server_time_offset}handle_message(e){var a;switch(e[0]){case 3:const t=this.read_uint48_be(e,1),r=(this.read_uint48_be(e,7),e.slice(13));null===(a=this.rooms.get(t))||void 0===a||a.forEach((e=>e(r)));break;case 6:this.handle_pong(e)}}join_room(e){const a=new Uint8Array(7);a[0]=0,this.write_uint48_be(a,1,e),this.ws.send(a)}exit_room(e){const a=new Uint8Array(7);a[0]=1,this.write_uint48_be(a,1,e),this.ws.send(a)}sync_time(){const e=new Uint8Array(1);e[0]=5;const a=Date.now();this.ws.send(e),this.last_ping_time=a}handle_pong(e){const a=Date.now(),t=this.read_uint48_be(e,1),r=a-this.last_ping_time;r<this.best_ping&&(this.best_ping=r,this.server_time_offset=t-a+Math.floor(r/2)),setTimeout((()=>this.sync_time()),3e3)}write_uint48_be(e,a,t){e[a]=t/Math.pow(2,40)&255,e[a+1]=t/Math.pow(2,32)&255,e[a+2]=t/Math.pow(2,24)&255,e[a+3]=t/Math.pow(2,16)&255,e[a+4]=t/Math.pow(2,8)&255,e[a+5]=255&t}read_uint48_be(e,a){return e[a]*Math.pow(2,40)+e[a+1]*Math.pow(2,32)+e[a+2]*Math.pow(2,24)+e[a+3]*Math.pow(2,16)+e[a+4]*Math.pow(2,8)+e[a+5]}},Dt=0,Kt=1,Wt=[],Ht=BigInt(50),Qt=BigInt(Math.floor(Math.random()*Math.pow(2,4)));console.log("PID is:",Qt);var zt,Yt=Number(Qt)%2==0?"Red":"Blue";console.log(Yt);var Xt,Jt,er=(Xt=Ht,function(e){return function(e,a,t,r){var n={$:"Mach"},i=t;n.ticks_per_second=i,n.genesis_tick=687399551400673280n,n.cached_tick=0n;n.state_logs={$:"None"};n.action_logs={$:"Leaf"};var s=r;return n.action_eq=s,n}(0,0,Xt,e)})((function(e){return function(e){var a=e;switch(a.$){case"ActionEvent":var t=function(e){var t=e;if("ActionEvent"===t.$)var r=function(e,a){var t=e,r=a,n=R(t.time,r.time),i=R(t.pid,r.pid),o=te(t.nick,r.nick),c=s(n,function(e){var a=e;switch(a.$){case"Blue":var t=function(e){if("Blue"===e.$)var a={$:"True"};else a={$:"False"};return a};break;case"Neutral":t=function(e){if("Neutral"===e.$)var a={$:"True"};else a={$:"False"};return a};break;case"Red":t=function(e){if("Red"===e.$)var a={$:"True"};else a={$:"False"};return a};break;default:t=null(a)}return t}(t.side)(r.side)),v=s(i,o);return s(c,v)}(a.action,t.action);else r={$:"False"};return r};break;case"KeyEvent":t=function(e){var t=e;if("KeyEvent"===t.$)var r=R(a.time,t.time),n=R(a.pid,t.pid),i=s(te(a.key,t.key),o(a.pressed)(t.pressed)),c=s(n,i),v=s(r,c);else v={$:"False"};return v};break;case"KeyMouse":var r=a.key;t="Cons"===r.$?function(e){var t=e;if("KeyMouse"===t.$){var n=t.key;if("Cons"===n.$)var i=R(a.time,t.time),c=R(a.pid,t.pid),v=f(r.head,n.head),u=o(a.pressed)(t.pressed),l=s(p(a.x,t.x),p(a.y,t.y)),d=s(u,l),h=s(v,d),b=s(c,h),$=s(i,b);else $={$:"False"}}else $={$:"False"};return $}:function(e){return{$:"False"}};break;case"MouseClick":t=function(e){var t=e;if("MouseClick"===t.$)var r=R(a.time,t.time),n=R(a.pid,t.pid),i=function(e){var a=e;switch(a.$){case"LeftButton":var t=function(e){if("LeftButton"===e.$)var a={$:"True"};else a={$:"False"};return a};break;case"RightButton":t=function(e){if("RightButton"===e.$)var a={$:"True"};else a={$:"False"};return a};break;default:t=null(a)}return t}(a.click)(t.click),o=s(p(a.x,t.x),p(a.y,t.y)),c=s(i,o),v=s(n,c),u=s(r,v);else u={$:"False"};return u};break;case"MouseMove":t=function(e){var t=e;if("MouseMove"===t.$)var r=R(a.time,t.time),n=R(a.pid,t.pid),i=s(p(a.x,t.x),p(a.y,t.y)),o=s(n,i),c=s(r,o);else c={$:"False"};return c};break;default:t=null(a)}return t}(e)})),ar=(Jt=null,function(e){return function(a){return function(t){return function(e,a,t,r){var n=r,i=bt(0,0,t,n.time),s=rt(0,t.action_logs,i);switch(o(function(e,a,t,r,n){for(;;){var i=t,s=n;switch(s.$){case"Cons":switch((0,i.action_eq)(r)(s.head).$){case"True":var o={$:"True"};break;case"False":var c=e,v=a,u={$:"Mach"},l=i.ticks_per_second;u.ticks_per_second=l;var d=i.genesis_tick;u.genesis_tick=d;var h=i.cached_tick;u.cached_tick=h;var f=i.state_logs;u.state_logs=f;var b=i.action_logs;u.action_logs=b;var $=i.action_eq;u.action_eq=$,e=c,a=v,t=u,n=s.tail;continue}break;case"Nil":o={$:"False"}}return o}}(e,a,t,n.action,s))({$:"True"}).$){case"True":var c=t;break;case"False":c=_t(0,a,function(e,a,t,r){var n=t,i=ft(0,dt(0,r,n.state_logs),n.state_logs),s={$:"Mach"},o=n.ticks_per_second;s.ticks_per_second=o;var c=n.genesis_tick;s.genesis_tick=c;var v=n.cached_tick;s.cached_tick=v;var u=i;s.state_logs=u;var l=n.action_logs;s.action_logs=l;var d=n.action_eq;return s.action_eq=d,s}(0,0,function(e,a,t,r){var n=t;switch(ve(r,n.cached_tick).$){case"True":var i={$:"Mach"},s=n.ticks_per_second;i.ticks_per_second=s;var o=n.genesis_tick;i.genesis_tick=o;var c=r;i.cached_tick=c;var v=n.state_logs;i.state_logs=v;var u=n.action_logs;i.action_logs=u;var l=n.action_eq;i.action_eq=l;break;case"False":i={$:"Mach"};var d=n.ticks_per_second;i.ticks_per_second=d;var h=n.genesis_tick;i.genesis_tick=h;var f=n.cached_tick;i.cached_tick=f;var b=n.state_logs;i.state_logs=b;var $=n.action_logs;i.action_logs=$;var _=n.action_eq;i.action_eq=_}return i}(0,0,kt(0,0,t,i),i),i),i,n.action)}return c}(Jt,e,a,t)}}})(null),tr=function(e){return function(a){return function(t){return function(r){return function(n){return function(e,a,t,r,n){var i=bt(0,0,t,n),s=function(e,a,t,r){var n=t,i=n.state_logs;switch(i.$){case"None":var s={$:"Pair"},o=function(e,a,t){return t.init}(0,0,r);s.fst=o;var c=n.genesis_tick;s.snd=c;break;case"Some":s={$:"Pair"};var v=ut(0,i.value);s.fst=v;var u=lt(0,i.value);s.snd=u}return s}(0,0,t,r),o=he(i,s.snd);switch(c(oe(o,1000000000000n),R(o,0n)).$){case"True":var v={$:"Pair"},u=s.fst;v.fst=u;var l=t;v.snd=l;break;case"False":v=function(e,a,t,r,n,i,s){for(;;){switch(R(i,s).$){case"True":var o={$:"Pair"},c=n;o.fst=c;var v=t;o.snd=v;break;case"False":var u=ne(i,1n),l=C(a,rt(0,st(0,0,t),i),e,n,it(0,0,r)),d=nt(0,0,r)(l);t=yt(0,0,t,i,n),n=d,i=u;continue}return o}}(e,a,t,r,s.fst,s.snd,i)}return v}(e,a,t,r,n)}}}}}(null)(null);function rr(e){return nr.apply(this,arguments)}function nr(){return(nr=jt(Vt().mark((function e(a){var t,r,n,i,s;return Vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),t=document.getElementById("room-number"),r=parseInt(t.value,10),n=document.getElementById("nickname"),i=n.value,s=Array.from(i,(function(e){return e.charCodeAt(0)})),e.next=8,ir(r,s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ir(e,a){return sr.apply(this,arguments)}function sr(){return(sr=jt(Vt().mark((function e(a,t){var r,n,i,s;return Vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dt=a,e.next=3,qt.init("wss://server.uwu.games");case 3:return console.log("CONNECTED"),qt.recv(Dt,(function(e){var a,t,r=$t(null),n=mt(e).value,i="ActionEvent"==n.$?n.action.time:n.time;"ActionEvent"==n.$&&"SetNick"==n.action.$&&(Wt.push(n.action.pid),Yt="Red"===Yt?"Blue":"Red",or(Wt),Wt.length===Kt&&(a=document.getElementById("lobby-container"),t=document.getElementById("game-container"),a&&t?(a.style.display="none",t.style.display="block",requestAnimationFrame(ur)):console.error("Could not find lobby or game container")));var s=r(BigInt(i))(n);er=ar(er)(s)})),r=qt.time(),n={$:"ActionEvent",action:{$:"SetNick",time:BigInt(r),pid:Qt,side:{$:Yt},nick:{$:"Cons",head:BigInt(69),tail:{$:"Nil"}}}},i=$t(null),s=$t(null)(BigInt(r))(n),er=ar(er)(s),e.next=12,qt.send(Dt,St(n));case 12:window.addEventListener("keydown",(function(e){er=Ot(e,qt,Qt,Dt,er,ar,i)})),window.addEventListener("keyup",(function(e){er=Ot(e,qt,Qt,Dt,er,ar,i)})),window.addEventListener("mousemove",(function(e){return Gt(e)})),window.addEventListener("click",(function(e){er=Ut(e,qt,Qt,Dt,er,ar,i)})),window.addEventListener("contextmenu",(function(e){e.preventDefault(),Ut(e,qt,Qt,Dt)})),t=void 0,o=void 0,t=document.getElementById("login-container"),o=document.getElementById("lobby-container"),t&&o?(t.style.display="none",o.style.display="block"):console.error("Could not find login or lobby container");case 18:case"end":return e.stop()}var t,o}),e)})))).apply(this,arguments)}function or(e){var a=document.getElementById("lobby-players");a&&(a.innerHTML="Players in lobby: ".concat(e.length,"/").concat(Kt))}window.addEventListener("load",(function(){var e;document.getElementById("canvas").getContext("2d"),(e=document.getElementById("login-form"))?e.addEventListener("submit",rr):console.error("Login form not found!")}));var cr=20,vr=performance.now();function ur(e){var a=e-vr;if(a>=cr){vr=e-a%cr;var t=BigInt(qt.time()),r=tr(er)(gt)(t);zt=r.fst,er=r.snd,function(e){var a=document.getElementById("canvas"),t=a.getContext("2d");t&&(t.fillStyle="white",t.fillRect(0,0,a.width,a.height),function(e){var a,r,n,i=Pt(e.entries());try{for(i.s();!(a=i.n()).done;){var s=Bt(a.value,2),o=(s[0],s[1]);"Some"==o.$&&(r=o.value.hitbox,n=o.value.side,function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Neutral";switch(e.beginPath(),null!=r&&r.$?r.$:r){case"Red":e.fillStyle="red";break;case"Blue":e.fillStyle="blue";break;default:e.fillStyle=t}switch(a.$){case"Circle":var n=a.center,i=a.radius;e.arc(n.x,n.y,i,0,2*Math.PI),e.fill();break;case"Polygon":var s=a.center,o=a.vertices;e.moveTo(s.x+o.head.x,s.y+o.head.y);for(var c=o.tail;"Nil"!==c.$;)e.lineTo(s.x+c.head.x,s.y+c.head.y),c=c.tail;e.closePath(),e.fill()}}(t,r,"black",n))}}catch(e){i.e(e)}finally{i.f()}}(e.game_map.bodies),function(e,a,t){var r,n=Pt(a.entries());try{for(n.s();!(r=n.n()).done;){var i=Bt(r.value,2),s=i[0],o=i[1];"Some"==o.$&&t(s,o.value,e)}}catch(e){n.e(e)}finally{n.f()}}(e,e.hero_states,Ct))}(zt)}requestAnimationFrame(ur)}})()})();